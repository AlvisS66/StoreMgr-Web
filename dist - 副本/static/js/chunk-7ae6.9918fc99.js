(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7ae6"],{Dk0a:function(t,a,s){"use strict";s.r(a),s.d(a,"PRODUCT",function(){return i}),s.d(a,"SERVICES",function(){return o}),s.d(a,"TCARD",function(){return c}),s.d(a,"PPCARD",function(){return l}),s.d(a,"RECHARGE",function(){return d}),s.d(a,"TYPE",function(){return h}),s.d(a,"PRODUCTS",function(){return u}),s.d(a,"PAYMENTS",function(){return _});var e,n=s("/umX"),r=s.n(n),i=0,o=1,c=2,l=3,d=4,h=(e={},r()(e,i,"商品"),r()(e,o,"服务"),r()(e,c,"计次卡"),r()(e,l,"储值卡"),r()(e,d,"余额充值"),e),u={ppcard:"储值卡",product:"商品",service:"服务",tcard:"计次卡",recharge:"余额充值"},_={ALIPAY:"支付宝",CASH:"现金",BANKCARD:"银行卡",WECHATPAY:"微信",OTHERS:"其他",PPCARD:"储值卡",DEPOSIT:"余额",GROUP_BUYING:"团购"}},"N/kD":function(t,a,s){"use strict";s.r(a);var e=s("bS4n"),n=s.n(e),r=s("+XIM"),i=s.n(r),o=s("88Rz"),c=s.n(o),l=s("7Qib"),d=s("8t5x");s("+9CQ");var h={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"290px"},data:Array},data:function(){return{chart:null}},computed:n()({},Object(d.b)(["sidebar"]),{isCollapse:function(){return!this.sidebar.opened}}),mounted:function(){var t=this;console.log("mounted",this.data),this.initChart(),this.__resizeHandler=Object(l.b)(function(){t.chart&&t.chart.resize()},100),window.addEventListener("resize",this.__resizeHandler)},beforeDestroy:function(){this.chart&&(window.removeEventListener("resize",this.__resizeHandler),this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=c.a.init(this.$el,"macarons"),this.chart.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"10",data:["商品","服务","计次卡","储值卡","余额充值"]},calculable:!0,color:["#fb7ca4","#31cfd3","#c4b4e5","#6abff3","#ffc692"],series:[{name:"产品占比",type:"pie",radius:"60%",center:["50%","50%"],data:this.data,animationEasing:"cubicInOut",animationDuration:2600}]})}},watch:{isCollapse:function(){this.__resizeHandler()},data:function(t){console.log("data",t),this.initChart()}}},u=s("ZrdR"),_=Object(u.a)(h,function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.className,style:{height:this.height,width:this.width}})},[],!1,null,null,null);_.options.__file="ProductPie.vue";var m=_.exports;s("+9CQ");var p={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"290px"},data:Array},data:function(){return{chart:null}},computed:n()({},Object(d.b)(["sidebar"]),{isCollapse:function(){return!this.sidebar.opened}}),mounted:function(){var t=this;this.initChart(),this.__resizeHandler=Object(l.b)(function(){t.chart&&t.chart.resize()},100),window.addEventListener("resize",this.__resizeHandler)},beforeDestroy:function(){this.chart&&(window.removeEventListener("resize",this.__resizeHandler),this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=c.a.init(this.$el,"macarons"),this.chart.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"10",data:["会员","会员点客","散客","散客点客"]},calculable:!0,color:["#fb7ca4","#31cfd3","#c4b4e5","#6abff3","#ffc692"],series:[{name:"客源占比",type:"pie",radius:"60%",center:["50%","50%"],data:this.data,animationEasing:"cubicInOut",animationDuration:2600}]})}},watch:{isCollapse:function(){this.__resizeHandler()},data:function(){this.initChart()}}},f=Object(u.a)(p,function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.className,style:{height:this.height,width:this.width}})},[],!1,null,null,null);f.options.__file="MemberPie.vue";var v=f.exports,b=s("GiRh"),j=s.n(b),g=s("EPZ6"),y=s.n(g),x=s("unDg"),C=s.n(x),w=s("Nlzp");s("+9CQ");var D={bankcard:"银行卡",cash:"现金",wechatpay:"微信",alipay:"支付宝",others:"其他",groupbuy:"团购"},k={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"400px"}},data:function(){return{chart:null,chartData:[],months:[]}},computed:n()({},Object(d.b)(["sidebar"]),{isCollapse:function(){return!this.sidebar.opened}}),mounted:function(){var t=this;console.log("isCollapse",this.isCollapse),this.__resizeHandler=Object(l.b)(function(){t.chart&&t.chart.resize()},100),window.addEventListener("resize",this.__resizeHandler),this.getIndexGraphData()},beforeDestroy:function(){this.chart&&(window.removeEventListener("resize",this.__resizeHandler),this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=c.a.init(this.$el,"macarons"),this.chart.setOption({tooltip:{trigger:"axis",formatter:function(t){var a=t[0].axisValueLabel+"<br/>";return t.forEach(function(t){a+=t.marker+" "+t.seriesName+"：￥"+t.value+" <br/>"}),a}},legend:{left:"center",bottom:"10",data:["现金","银行卡","支付宝","微信","团购","其他"]},grid:{left:"0",right:"0",top:"3%",bottom:"10%",containLabel:!0},calculable:!0,xAxis:[{type:"category",data:this.months}],yAxis:[{type:"value",axisLabel:{formatter:"￥{value}"}}],color:["#fb7ca4","#31cfd3","#c4b4e5","#6abff3","#ffc692"],series:this.chartData})},getIndexGraphData:function(){var t=this,a=n()({},this.filter);Object(w.b)(a).then(function(a){var s=a.success.data.reverse();t.handelGraphData(s)})},handelGraphData:function(t){var a=[],s=[];t.forEach(function(t){a=[].concat(C()(a),C()(y()(t))),s=[].concat(C()(s),C()(j()(t)))}),this.months=a;var e=[],n=[];s.forEach(function(t,a){n.push(y()(t)),e.push(j()(t))});var r=[];e.forEach(function(t){t.forEach(function(t,a){Array.isArray(r[a])||(r[a]=[]),r[a]=[].concat(C()(r[a]),[Number(t)])})});for(var i=[],o=0;o<r.length;o++)i[o]={name:D[n[1][o]],type:"bar",data:r[o]};this.chartData=i,this.initChart()}},watch:{isCollapse:function(){this.__resizeHandler()}}},z=Object(u.a)(k,function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.className,style:{height:this.height,width:this.width}})},[],!1,null,null,null);z.options.__file="IncomeBar.vue";var O=z.exports,S=s("+wx0"),E=s("Dk0a"),P=s("a/LZ"),I={bankcard:"银行卡",cash:"现金",wechatpay:"微信",alipay:"支付宝",others:"其他",groupbuy:"团购"},N={name:"Index",components:{DateQuery:S.a,ProductPie:m,MemberPie:v,IncomeBar:O},data:function(){return{PRODUCTS:E.PRODUCTS,payments:I,filter:{start_date:P().format("YYYY-MM-DD"),end_date:P().add(1,"days").format("YYYY-MM-DD")},indexData:"",businessList:[],product_format:[],member_format:[]}},mounted:function(){this.getIndexData()},methods:{getDateQuery:function(t){var a=i()(t,2);this.filter.start_date=a[0],this.filter.end_date=a[1],console.log("获取筛选时间",this.filter.start_date,this.filter.start_date),this.getIndexData()},getIndexData:function(){var t=this,a=n()({},this.filter);Object(w.a)(a).then(function(a){var s=a.success.data;t.indexData=s,t.handelProductData(s.product_data),t.handelMemberData(s.member_data)})},handelProductData:function(t){var a=[];for(var s in t)if("total"!==s){var e={value:Number(t[s].amount),name:E.PRODUCTS[s]};a.push(e)}this.product_format=a},handelMemberData:function(t){this.member_format=[{value:t.member_noappoint_amount,name:"会员"},{value:t.member_appoint_amount,name:"会员点客"},{value:t.guest_noappoint_amount,name:"散客"},{value:t.guest_appoint_amount,name:"散客点客"}]}}},T=(s("Yys4"),s("qiWz"),Object(u.a)(N,function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"app-container index-page",attrs:{id:"index-page"}},[s("el-row",{staticClass:"card-box mb-15",attrs:{gutter:24}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"card-panel",on:{click:function(a){t.$router.push({name:"cash_billing"})}}},[s("span",[t._v("快速开单")]),t._v(" "),s("span",{staticClass:"icon"})])]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"card-panel",on:{click:function(a){t.$router.push({name:"member_manage",params:{type:"add"}})}}},[s("span",[t._v("新增会员")]),t._v(" "),s("span",{staticClass:"icon"})])]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"card-panel"},[s("span",[t._v("新增预约")]),t._v(" "),s("span",{staticClass:"icon"})])])],1),t._v(" "),s("el-row",{staticClass:"ranking-list payment-cart",attrs:{gutter:24}},[s("el-col",{attrs:{span:24}},[s("el-card",{staticClass:"ranking-box",attrs:{shadow:"always"}},[s("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[t._v("营业分析")]),t._v(" "),s("div",{staticClass:"chart-box"},[s("income-bar")],1)])],1)],1),t._v(" "),s("date-query",{on:{dateQuery:function(a){t.getDateQuery(a)}}}),t._v(" "),t.indexData?s("el-row",{staticClass:"ranking-list payment-list"},[s("el-col",{attrs:{span:24}},[s("el-card",{staticClass:"ranking-box analysis-box",attrs:{shadow:"always"}},[s("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[t._v("营业收入"),s("span",[t._v("营收合计: "+t._s(t._f("formatMoney")(t.indexData.payment_data.total)))])]),t._v(" "),s("ul",{staticClass:"income-analysis"},[s("li",{staticClass:"title"},[s("span",[t._v("收款方式")]),t._v(" "),s("span",[t._v("实收金额")]),t._v(" "),s("span",[t._v("收款占比")])]),t._v(" "),t._l(t.indexData.payment_data,function(a,e){return[t.payments[e]?s("li",[s("span",[t._v(t._s(t.payments[e]))]),t._v(" "),s("span",[t._v(t._s(t._f("formatMoney")(a)))]),t._v(" "),s("span",[t._v(t._s(t._f("calcPercent")(a,t.indexData.payment_data.total)))])]):t._e()]})],2)])],1)],1):t._e(),t._v(" "),t.indexData?s("el-row",{staticClass:"ranking-list",attrs:{gutter:15}},[s("el-col",{attrs:{span:12}},[s("el-card",{staticClass:"ranking-box charts analysis-box",attrs:{shadow:"always"}},[s("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[t._v("产品分类 "),s("span",[t._v("销售总额:"+t._s(t._f("formatMoney")(t.indexData.product_data.total.amount)))])]),t._v(" "),s("table",{staticClass:"index-data-table"},[s("tr",[s("th",[t._v("#")]),t._v(" "),s("th",[t._v("产品分类")]),t._v(" "),s("th",[t._v("销售数量")]),t._v(" "),s("th",[t._v("销售总额")])]),t._v(" "),t._l(t.indexData.product_data,function(a,e,n){return[t.PRODUCTS[e]?s("tr",[s("td",[t._v(t._s(n+1))]),t._v(" "),s("td",[t._v(t._s(t.PRODUCTS[e]))]),t._v(" "),s("td",[t._v(t._s(a.num))]),t._v(" "),s("td",[t._v(t._s(t._f("formatMoney")(a.amount)))])]):t._e()]})],2)])],1),t._v(" "),s("el-col",{attrs:{span:12}},[s("el-card",{staticClass:"ranking-box",attrs:{shadow:"always"}},[s("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[t._v("产品占比")]),t._v(" "),s("div",{staticClass:"chart-box"},[t.product_format.length?s("product-pie",{attrs:{data:t.product_format}}):t._e()],1)])],1)],1):t._e(),t._v(" "),t.indexData?s("el-row",{staticClass:"ranking-list",attrs:{gutter:15}},[s("el-col",{attrs:{span:12}},[s("el-card",{staticClass:"ranking-box analysis-box charts ",attrs:{shadow:"always"}},[s("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[t._v("客源分析\n          "),s("span",[t._v("消费总额: "+t._s(t._f("formatMoney")(t.indexData.member_data.amount_total)))])]),t._v(" "),s("table",{staticClass:"index-data-table"},[s("tr",[s("th",[t._v("#")]),t._v(" "),s("th",[t._v("客源状态")]),t._v(" "),s("th",[t._v("订单数")]),t._v(" "),s("th",[t._v("消费总额")])]),t._v(" "),s("tr",[s("td",[t._v("1")]),t._v(" "),s("td",[t._v("会员")]),t._v(" "),s("td",[t._v(t._s(t.indexData.member_data.member_noappoint_count))]),t._v(" "),s("td",[t._v(t._s(t._f("formatMoney")(t.indexData.member_data.member_noappoint_amount)))])]),t._v(" "),s("tr",[s("td",[t._v("2")]),t._v(" "),s("td",[t._v("会员点客")]),t._v(" "),s("td",[t._v(t._s(t.indexData.member_data.member_appoint_count))]),t._v(" "),s("td",[t._v(t._s(t._f("formatMoney")(t.indexData.member_data.member_appoint_amount)))])]),t._v(" "),s("tr",[s("td",[t._v("3")]),t._v(" "),s("td",[t._v("散客")]),t._v(" "),s("td",[t._v(t._s(t.indexData.member_data.guest_noappoint_count))]),t._v(" "),s("td",[t._v(t._s(t._f("formatMoney")(t.indexData.member_data.guest_noappoint_amount)))])]),t._v(" "),s("tr",[s("td",[t._v("4")]),t._v(" "),s("td",[t._v("散客点客")]),t._v(" "),s("td",[t._v(t._s(t.indexData.member_data.guest_appoint_count))]),t._v(" "),s("td",[t._v(t._s(t._f("formatMoney")(t.indexData.member_data.guest_appoint_amount)))])])])])],1),t._v(" "),s("el-col",{attrs:{span:12}},[s("el-card",{staticClass:"ranking-box analysis-box",attrs:{shadow:"always"}},[s("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[t._v("客源占比")]),t._v(" "),s("div",{staticClass:"chart-box"},[t.member_format.length?s("member-pie",{attrs:{data:t.member_format}}):t._e()],1)])],1)],1):t._e()],1)},[],!1,null,"be903a26",null));T.options.__file="index.vue";a.default=T.exports},Nlzp:function(t,a,s){"use strict";s.d(a,"a",function(){return n}),s.d(a,"b",function(){return r}),s.d(a,"c",function(){return i});var e=s("t3Un");function n(t){var a=t.start_date,s=t.end_date;return Object(e.a)({url:"statistics/indexData",method:"get",params:{start_date:a,end_date:s}})}function r(){return Object(e.a)({url:"statistics/indexGraphData",method:"get",params:{}})}var i="http://api.zgyjyy.com/storeApi/upload/images"},Yys4:function(t,a,s){"use strict";var e=s("p3Sk");s.n(e).a},d9LT:function(t,a,s){var e={"./af":"+6xi","./af.js":"+6xi","./ar":"+W91","./ar-dz":"5jx2","./ar-dz.js":"5jx2","./ar-kw":"t73a","./ar-kw.js":"t73a","./ar-ly":"lo/q","./ar-ly.js":"lo/q","./ar-ma":"n50M","./ar-ma.js":"n50M","./ar-sa":"rqV/","./ar-sa.js":"rqV/","./ar-tn":"1EuX","./ar-tn.js":"1EuX","./ar.js":"+W91","./az":"x+2I","./az.js":"x+2I","./be":"Wij6","./be.js":"Wij6","./bg":"ElF8","./bg.js":"ElF8","./bm":"KAm4","./bm.js":"KAm4","./bn":"tPyy","./bn.js":"tPyy","./bo":"VISF","./bo.js":"VISF","./br":"WtwE","./br.js":"WtwE","./bs":"rBCO","./bs.js":"rBCO","./ca":"44HC","./ca.js":"44HC","./cs":"rvJI","./cs.js":"rvJI","./cv":"ZWbz","./cv.js":"ZWbz","./cy":"E5DT","./cy.js":"E5DT","./da":"Hs5t","./da.js":"Hs5t","./de":"XxBd","./de-at":"CcTh","./de-at.js":"CcTh","./de-ch":"iaL8","./de-ch.js":"iaL8","./de.js":"XxBd","./dv":"5mII","./dv.js":"5mII","./el":"GWtt","./el.js":"GWtt","./en-SG":"CjJ2","./en-SG.js":"CjJ2","./en-au":"lO0b","./en-au.js":"lO0b","./en-ca":"KAbr","./en-ca.js":"KAbr","./en-gb":"sN32","./en-gb.js":"sN32","./en-ie":"em4J","./en-ie.js":"em4J","./en-il":"Hw9U","./en-il.js":"Hw9U","./en-nz":"FgZP","./en-nz.js":"FgZP","./eo":"8hQ3","./eo.js":"8hQ3","./es":"fVik","./es-do":"c3uw","./es-do.js":"c3uw","./es-us":"qJRn","./es-us.js":"qJRn","./es.js":"fVik","./et":"qIgW","./et.js":"qIgW","./eu":"E1es","./eu.js":"E1es","./fa":"Ckh4","./fa.js":"Ckh4","./fi":"wrHw","./fi.js":"wrHw","./fo":"UsS5","./fo.js":"UsS5","./fr":"BOb6","./fr-ca":"atEc","./fr-ca.js":"atEc","./fr-ch":"sS/8","./fr-ch.js":"sS/8","./fr.js":"BOb6","./fy":"rRPx","./fy.js":"rRPx","./ga":"Np74","./ga.js":"Np74","./gd":"It5a","./gd.js":"It5a","./gl":"+AhC","./gl.js":"+AhC","./gom-latn":"UNVT","./gom-latn.js":"UNVT","./gu":"5noc","./gu.js":"5noc","./he":"A3zy","./he.js":"A3zy","./hi":"PVOm","./hi.js":"PVOm","./hr":"Z4sp","./hr.js":"Z4sp","./hu":"F4OY","./hu.js":"F4OY","./hy-am":"KHN6","./hy-am.js":"KHN6","./id":"3pmv","./id.js":"3pmv","./is":"aqIZ","./is.js":"aqIZ","./it":"H5Oh","./it-ch":"Lbn0","./it-ch.js":"Lbn0","./it.js":"H5Oh","./ja":"a/hR","./ja.js":"a/hR","./jv":"blXy","./jv.js":"blXy","./ka":"5l9n","./ka.js":"5l9n","./kk":"cWeS","./kk.js":"cWeS","./km":"RmhJ","./km.js":"RmhJ","./kn":"49JL","./kn.js":"49JL","./ko":"sFhI","./ko.js":"sFhI","./ku":"AX7K","./ku.js":"AX7K","./ky":"sr0c","./ky.js":"sr0c","./lb":"5Qxw","./lb.js":"5Qxw","./lo":"yhSl","./lo.js":"yhSl","./lt":"PoQ0","./lt.js":"PoQ0","./lv":"zh3s","./lv.js":"zh3s","./me":"nTjT","./me.js":"nTjT","./mi":"Pi6G","./mi.js":"Pi6G","./mk":"1TLg","./mk.js":"1TLg","./ml":"22En","./ml.js":"22En","./mn":"dJOO","./mn.js":"dJOO","./mr":"Utgi","./mr.js":"Utgi","./ms":"tVnS","./ms-my":"dGL7","./ms-my.js":"dGL7","./ms.js":"tVnS","./mt":"wFWj","./mt.js":"wFWj","./my":"SeDP","./my.js":"SeDP","./nb":"6xxv","./nb.js":"6xxv","./ne":"Csux","./ne.js":"Csux","./nl":"dJfi","./nl-be":"MRTp","./nl-be.js":"MRTp","./nl.js":"dJfi","./nn":"mpz7","./nn.js":"mpz7","./pa-in":"xZWs","./pa-in.js":"xZWs","./pl":"gByo","./pl.js":"gByo","./pt":"WwjB","./pt-br":"FV8/","./pt-br.js":"FV8/","./pt.js":"WwjB","./ro":"Bfzf","./ro.js":"Bfzf","./ru":"kLOS","./ru.js":"kLOS","./sd":"mb+L","./sd.js":"mb+L","./se":"INbG","./se.js":"INbG","./si":"fAt1","./si.js":"fAt1","./sk":"kPwN","./sk.js":"kPwN","./sl":"hxsc","./sl.js":"hxsc","./sq":"sEVj","./sq.js":"sEVj","./sr":"rIH4","./sr-cyrl":"otCO","./sr-cyrl.js":"otCO","./sr.js":"rIH4","./ss":"sJOY","./ss.js":"sJOY","./sv":"EuXU","./sv.js":"EuXU","./sw":"OKBF","./sw.js":"OKBF","./ta":"pGL5","./ta.js":"pGL5","./te":"GMsB","./te.js":"GMsB","./tet":"DBFB","./tet.js":"DBFB","./tg":"1wcQ","./tg.js":"1wcQ","./th":"iD8K","./th.js":"iD8K","./tl-ph":"bMCK","./tl-ph.js":"bMCK","./tlh":"q1OC","./tlh.js":"q1OC","./tr":"5SN/","./tr.js":"5SN/","./tzl":"sZJe","./tzl.js":"sZJe","./tzm":"VgS6","./tzm-latn":"n5U2","./tzm-latn.js":"n5U2","./tzm.js":"VgS6","./ug-cn":"n0/P","./ug-cn.js":"n0/P","./uk":"i9YG","./uk.js":"i9YG","./ur":"mngK","./ur.js":"mngK","./uz":"TUw/","./uz-latn":"2nP5","./uz-latn.js":"2nP5","./uz.js":"TUw/","./vi":"t2ap","./vi.js":"t2ap","./x-pseudo":"KmmR","./x-pseudo.js":"KmmR","./yo":"/S7I","./yo.js":"/S7I","./zh-cn":"NdDt","./zh-cn.js":"NdDt","./zh-hk":"e0XV","./zh-hk.js":"e0XV","./zh-tw":"+mZi","./zh-tw.js":"+mZi"};function n(t){var a=r(t);return s(a)}function r(t){var a=e[t];if(!(a+1)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return a}n.keys=function(){return Object.keys(e)},n.resolve=r,t.exports=n,n.id="d9LT"},p3Sk:function(t,a,s){},qiWz:function(t,a,s){"use strict";var e=s("t1ht");s.n(e).a},t1ht:function(t,a,s){}}]);