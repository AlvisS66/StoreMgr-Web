(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6256"],{"+r/X":function(t,e,i){},"06tH":function(t,e,i){"use strict";var a=i("zDgb"),o=i("a5ZE"),s={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},n=Date.prototype.toISOString,r={delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,serializeDate:function(t){return n.call(t)},skipNulls:!1,strictNullHandling:!1},l=function t(e,i,o,s,n,l,c,d,u,f,p,m){var h=e;if("function"==typeof c)h=c(i,h);else if(h instanceof Date)h=f(h);else if(null===h){if(s)return l&&!m?l(i,r.encoder):i;h=""}if("string"==typeof h||"number"==typeof h||"boolean"==typeof h||a.isBuffer(h))return l?[p(m?i:l(i,r.encoder))+"="+p(l(h,r.encoder))]:[p(i)+"="+p(String(h))];var v,g=[];if(void 0===h)return g;if(Array.isArray(c))v=c;else{var b=Object.keys(h);v=d?b.sort(d):b}for(var _=0;_<v.length;++_){var y=v[_];n&&null===h[y]||(g=Array.isArray(h)?g.concat(t(h[y],o(i,y),o,s,n,l,c,d,u,f,p,m)):g.concat(t(h[y],i+(u?"."+y:"["+y+"]"),o,s,n,l,c,d,u,f,p,m)))}return g};t.exports=function(t,e){var i=t,n=e?a.assign({},e):{};if(null!==n.encoder&&void 0!==n.encoder&&"function"!=typeof n.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===n.delimiter?r.delimiter:n.delimiter,d="boolean"==typeof n.strictNullHandling?n.strictNullHandling:r.strictNullHandling,u="boolean"==typeof n.skipNulls?n.skipNulls:r.skipNulls,f="boolean"==typeof n.encode?n.encode:r.encode,p="function"==typeof n.encoder?n.encoder:r.encoder,m="function"==typeof n.sort?n.sort:null,h=void 0!==n.allowDots&&n.allowDots,v="function"==typeof n.serializeDate?n.serializeDate:r.serializeDate,g="boolean"==typeof n.encodeValuesOnly?n.encodeValuesOnly:r.encodeValuesOnly;if(void 0===n.format)n.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,n.format))throw new TypeError("Unknown format option provided.");var b,_,y=o.formatters[n.format];"function"==typeof n.filter?i=(_=n.filter)("",i):Array.isArray(n.filter)&&(b=_=n.filter);var w,k=[];if("object"!=typeof i||null===i)return"";w=n.arrayFormat in s?n.arrayFormat:"indices"in n?n.indices?"indices":"repeat":"indices";var L=s[w];b||(b=Object.keys(i)),m&&b.sort(m);for(var S=0;S<b.length;++S){var C=b[S];u&&null===i[C]||(k=k.concat(l(i[C],C,L,d,u,f?p:null,_,m,h,v,y,g)))}var x=k.join(c),T=!0===n.addQueryPrefix?"?":"";return x.length>0?T+x:""}},"2+ht":function(t,e,i){},"2Yzp":function(t,e,i){},"4mcY":function(t,e,i){},"76wh":function(t,e,i){"use strict";var a=i("Ms11");i.n(a).a},"Dk/q":function(t,e,i){"use strict";var a=i("06tH"),o=i("WFa2"),s=i("a5ZE");t.exports={formats:s,parse:o,stringify:a}},"JM/C":function(t,e,i){"use strict";var a=i("2Yzp");i.n(a).a},M8XD:function(t,e,i){"use strict";i.r(e);var a=i("6ZY3"),o=i.n(a),s=i("Mz3J"),n=i("RYct"),r=i("t3Un"),l=i("Dk/q");function c(t){return Object(r.a)({url:"staff/staff",method:"get",params:t})}function d(t){return Object(r.a)({url:"staff/position",method:"get",params:t})}function u(t){return Object(r.a)({url:"staff/position/"+t,method:"get"})}function f(){return Object(r.a)({url:"permission/group",method:"get"})}function p(t){return Object(r.a)({url:"permission/role/"+t,method:"get"})}var m=i("Nlzp"),h={name:"staff",props:{},components:{Pagination:s.a},filters:{formatCreat:function(t){return null==t||t.length<1?"-":t.trim().split(" ")[0]},formatBirthday:function(t){return null==t||t.length<1?"-":t.date.trim().split(" ")[0]}},data:function(){var t=function(t,e,i){""==e||void 0==e?i():new Date(e).getTime()>=(new Date).getTime()?i(new Error):i()};return{uploadUrl:m.c,multipleSelection:[],listLoading:!0,staffList:[],positionList:[],groupList:[],temp:{item:{avatar_url:void 0,workcard:void 0,realname:void 0,password:void 0,gender:null,birthday:void 0,mobile:void 0,entry_time:void 0,position_id:void 0,role_ids:[],remark:void 0}},dialogEditFormVisible:!1,dialogStatus:"",dialogTitle:{create:"新增员工",edit:"编辑员工"},rules:{workcard:[{required:!0,trigger:"blur",message:"登录工号不能为空"},{validator:function(t,e,i){""==e||void 0==e?i():/^[\x21-\x7E]{1,}$/.test(e)?i():i(new Error)},trigger:"blur",message:"登录工号格式不正确"}],realname:[{required:!0,trigger:"blur",message:"员工姓名不能为空"}],password:[{validator:function(t,e,i){""==e||void 0==e?i():/^[\x21-\x7E]{6,}$/.test(e)?i():(n.Message.error("密码长度必须不少于6位"),i(new Error))},trigger:"blur",message:"登录密码格式不正确"}],mobile:[{required:!0,trigger:"blur",message:"联系手机不能为空"},{validator:function(t,e,i){""==e||void 0==e?i():/^[1][3,4,5,7,8][0-9]{9}$/.test(e)?i():i(new Error)},trigger:"blur",message:"联系手机格式不正确"}],position_id:[{required:!0,trigger:"blur",message:"所属职位不能为空"}],role_ids:[{required:!0,trigger:"blur",message:"所属角色不能为空"}],entry_time:[{validator:t,trigger:"blur",message:"入职日期不正确"}],birthday:[{validator:t,trigger:"blur",message:"员工生日不正确"}]},listQuery:{page:1,limit:10,search:""},total:0,layout:" sizes, jumper, next, pager, prev, total"}},methods:{handleCommand:function(t){"assign"==t?this.handleAssign():this.openDelBox()},handleSearch:function(){this.listQuery.page=1,this.getStaffList()},handleSelectionChange:function(t){this.multipleSelection=t},resetTemp:function(){this.temp={item:{avatar_url:void 0,workcard:void 0,realname:void 0,password:void 0,gender:null,birthday:void 0,mobile:void 0,entry_time:void 0,position_id:void 0,role_ids:[],remark:void 0}}},handleAdd:function(){var t=this;this.getPositionList(),this.getGroupList(),this.resetTemp(),this.dialogStatus="create",this.dialogEditFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},createData:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&(console.log("新增temp",t.temp),function(t){return t=l.stringify(t,{arrayFormat:"brackets"}),Object(r.a)({url:"staff/staff",method:"post",data:t})}(t.temp.item).then(function(e){t.getStaffList(),t.dialogEditFormVisible=!1,t.$message.success("新增成功")}).catch(function(t){console.log(t)}))})},handleEdit:function(t){var e=this;console.log("row",t),this.getPositionList(),this.getGroupList(),this.resetTemp();var i=t.id,a=t.avatar_url,s=t.workcard,n=t.realname,r=t.gender,l=t.birthday,c=t.mobile,d=t.entry_time,u=t.position,f=t.roles,p=t.remark,m=null==u?void 0:u.id,h=[];l=null==l?void 0:l.date.split(" ")[0],d=null==d||""==d?void 0:d.split(" ")[0],f.forEach(function(t){h.push(t.id)}),this.temp=o()({},this.temp,{id:i,item:{avatar_url:a,workcard:s,realname:n,password:void 0,gender:r,birthday:l,mobile:c,entry_time:d,position_id:m,role_ids:h,remark:p}}),console.log("编辑temp:",this.temp),this.dialogStatus="edit",this.dialogEditFormVisible=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()})},updateData:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&(console.log("提交temp",t.temp),function(t,e){return e=l.stringify(e,{arrayFormat:"brackets"}),Object(r.a)({url:"staff/staff/"+t,method:"patch",data:e})}(t.temp.id,t.temp.item).then(function(e){t.getStaffList(),t.dialogEditFormVisible=!1,t.$message.success("编辑成功")}).catch(function(t){console.log(t)}))})},openDelBox:function(){var t=this;0!=this.multipleSelection.length?this.$confirm("确定永久性删除此员工吗?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){console.log(t.multipleSelection);var e=[];t.multipleSelection.forEach(function(t,i){e.push(t.id)});var i=e.join(",");t.handledelStaff(i)}).catch(function(t){}):this.$message.warning("请选择员工进行操作")},handledelStaff:function(t){var e=this;(function(t){return Object(r.a)({url:"staff/staff/"+t,method:"delete"})})(t).then(function(t){e.getStaffList(),e.$message.success("删除成功")}).catch(function(t){console.log(t),e.$message.error("删除失败")})},handleDelete:function(t){var e=this;this.$confirm("确定永久性删除此员工吗?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){var i=t.id;e.handledelStaff(i)}).catch(function(t){})},getStaffList:function(){var t=this;c(this.listQuery).then(function(e){var i=e.success.data;console.log("员工列表",i),t.staffList=i.data,t.total=i.total,t.listLoading=!1}).catch(function(t){console.log(t)})},getPositionList:function(){var t=this;d().then(function(e){var i=e.success.data;console.log("职位列表",i),t.positionList=i}).catch(function(t){console.log(t)})},getGroupList:function(){var t=this;f().then(function(e){var i=e.success.data;t.groupList=i,console.log("角色组列表",i)}).catch(function(t){})},uploadImage:function(){},beforeUpload:function(t){},uploadSuccess:function(t,e,i){console.log(t.success.data),console.log(e),this.temp.item.avatar_url=t.success.data},uploadError:function(t,e,i){console.log(t)}},created:function(){this.getStaffList(),console.log("staff")}},v=(i("XOEO"),i("un+E"),i("ZrdR")),g=Object(v.a)(h,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container system_staff_tab"},[i("div",{staticClass:"filter_container"},[i("el-dropdown",{staticClass:"fl",attrs:{trigger:"click",placement:"bottom-start"},on:{command:t.handleCommand}},[i("el-button",{staticClass:"showbtn",attrs:{type:"primary"}},[t._v("\n        批量操作"),i("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{color:"#c7cbd2"}})]),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"del"}},[t._v("删除")])],1)],1),t._v(" "),i("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("\n      新增员工\n    ")]),t._v(" "),i("el-input",{staticClass:"fr search",attrs:{placeholder:"姓名、工号或手机","prefix-icon":"el-icon-search",clearable:""},on:{change:t.handleSearch},model:{value:t.listQuery.search,callback:function(e){t.$set(t.listQuery,"search",e)},expression:"listQuery.search"}})],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"staffList",staticClass:"goods_list",staticStyle:{width:"100%"},attrs:{data:t.staffList,fit:"",stripe:""},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{align:"left",type:"index",width:"40px"}}),t._v(" "),i("el-table-column",{attrs:{align:"left",type:"selection",width:"30px"}}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"员工姓名",prop:"realname","min-width":"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"member_name"},[i("span",{staticClass:"avatar_img"},[i("img",{directives:[{name:"avatar",rawName:"v-avatar",value:[e.row.avatar_url,e.row.gender],expression:"[scope.row.avatar_url,scope.row.gender]"}]})]),t._v("\n          "+t._s(e.row.realname)+"\n        ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"登录工号"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.workcard))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"联系手机"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.mobile))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"性别"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(1==e.row.gender?"男":0==e.row.gender?"女":"保密"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"员工生日"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("formatBirthday")(e.row.birthday)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"所属职位"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.position?e.row.position.name:""))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"入职日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("formatCreat")(e.row.entry_time)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"160",align:"left",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],staticClass:"pagination",attrs:{layout:t.layout,total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){t.$set(t.listQuery,"page",e)},"update:limit":function(e){t.$set(t.listQuery,"limit",e)},pagination:t.getStaffList}}),t._v(" "),i("el-dialog",{staticClass:"goods_dialog",attrs:{title:t.dialogTitle[t.dialogStatus],visible:t.dialogEditFormVisible,width:"746px"},on:{"update:visible":function(e){t.dialogEditFormVisible=e}}},[i("el-form",{ref:"dataForm",attrs:{"label-position":"right","label-width":"80px",model:t.temp.item,rules:t.rules,"show-message":!0}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{staticClass:"left_content",attrs:{span:12}},[i("div",{staticClass:"upload_avatar clearfix"},[i("div",{staticClass:"image-preview fl"},[i("div",{staticClass:"image-preview-wrapper"},[i("img",{directives:[{name:"avatar",rawName:"v-avatar",value:[t.temp.item.avatar_url,t.temp.item.gender],expression:"[temp.item.avatar_url,temp.item.gender]"}]}),t._v(" "),i("div",{staticClass:"image-preview-action"})])]),t._v(" "),i("el-upload",{ref:"uploadImg",staticClass:"upload_btn fl",attrs:{action:t.uploadUrl,name:"imageurl","show-file-list":!1,"with-credentials":!1,"before-upload":t.beforeUpload,"on-success":t.uploadSuccess,"on-error":t.uploadError}},[i("div",{staticClass:"trigger_btn",attrs:{slot:"trigger"},slot:"trigger"},[t._v("上传头像")]),t._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[i("div",[t._v("\n                  支持上传图片格式jpg、png、gif。\n                ")]),t._v(" "),i("div",[t._v("\n                  尺寸：80像素*80像素\n                ")])])])],1),t._v(" "),i("el-form-item",{attrs:{label:"登录工号",prop:"workcard"}},[i("el-input",{model:{value:t.temp.item.workcard,callback:function(e){t.$set(t.temp.item,"workcard",e)},expression:"temp.item.workcard"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"员工姓名",prop:"realname"}},[i("el-input",{model:{value:t.temp.item.realname,callback:function(e){t.$set(t.temp.item,"realname",e)},expression:"temp.item.realname"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[i("el-input",{attrs:{type:"password"},model:{value:t.temp.item.password,callback:function(e){t.$set(t.temp.item,"password",e)},expression:"temp.item.password"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"员工性别"}},[i("el-radio-group",{model:{value:t.temp.item.gender,callback:function(e){t.$set(t.temp.item,"gender",e)},expression:"temp.item.gender"}},[i("el-radio",{attrs:{label:1}},[t._v("男")]),t._v(" "),i("el-radio",{attrs:{label:0}},[t._v("女")]),t._v(" "),i("el-radio",{attrs:{label:null}},[t._v("保密")])],1)],1)],1),t._v(" "),i("el-col",{staticClass:"right_content",attrs:{span:12}},[i("el-form-item",{attrs:{label:"员工生日",prop:"birthday"}},[i("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:t.temp.item.birthday,callback:function(e){t.$set(t.temp.item,"birthday",e)},expression:"temp.item.birthday"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"联系手机",prop:"mobile"}},[i("el-input",{model:{value:t.temp.item.mobile,callback:function(e){t.$set(t.temp.item,"mobile",e)},expression:"temp.item.mobile"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"入职日期",prop:"entry_time"}},[i("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:t.temp.item.entry_time,callback:function(e){t.$set(t.temp.item,"entry_time",e)},expression:"temp.item.entry_time"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"所属职位",prop:"position_id"}},[i("el-select",{model:{value:t.temp.item.position_id,callback:function(e){t.$set(t.temp.item,"position_id",e)},expression:"temp.item.position_id"}},t._l(t.positionList,function(t,e,a){return i("el-option",{key:a,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"所属角色",prop:"role_ids"}},[i("el-select",{attrs:{multiple:"",placeholder:"","popper-class":"select_role"},model:{value:t.temp.item.role_ids,callback:function(e){t.$set(t.temp.item,"role_ids",e)},expression:"temp.item.role_ids"}},t._l(t.groupList,function(e,a,o){return i("el-option-group",{key:o,attrs:{label:e.name}},t._l(e.roles,function(t){return i("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})}))}))],1),t._v(" "),i("el-form-item",{attrs:{label:"备注信息"}},[i("el-input",{attrs:{type:"textarea",rows:3},model:{value:t.temp.item.remark,callback:function(e){t.$set(t.temp.item,"remark",e)},expression:"temp.item.remark"}})],1)],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"vertical-align":"middle"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogEditFormVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"==t.dialogStatus?t.createData():t.updateData()}}},[t._v("确 定")])],1)],1)],1)},[],!1,null,"103e126e",null);g.options.__file="staff.vue";var b=g.exports,_=i("unDg"),y=i.n(_),w={name:"select-staff",inject:["getStaff"],props:{positionStaffList:{type:Array,default:function(){return[]}},listLoading:{type:Boolean,default:!1},activeTab:{type:String,default:" "},positionId:[String,Number,Boolean],visible:{type:Boolean,default:!1},page:{type:String}},filters:{formatCreat:function(t){return null==t||t.length<1?"-":t.trim().split(" ")[0]}},data:function(){return{multipleSelection:[],checkList:[],staffList:[],staffList_g:[],editDialog:{listLoading:!0},listQuery:{search:void 0,limit:1e4},title:{position:"职位",role:"角色"}}},methods:{handleSelectionChange:function(t){this.multipleSelection=t},handleSearch:function(){var t=this;c(this.listQuery).then(function(e){var i=e.success.data;console.log("员工列表",i),t.staffList=i.data}).catch(function(t){console.log(t)})},handleSelectionStaff:function(){console.log(this.activeTab)," "!=this.activeTab?(this.$emit("update:positionId",!1),this.show=!0,this.getStaffList(this.activeTab)):this.$message.warning("请选择"+this.title[this.page]+"进行操作")},handleRemoveChecked:function(t){var e=this.checkList.indexOf(t);this.checkList.splice(e,1)},updateCheckList:function(){var t=this,e=this.positionId?this.positionId:this.activeTab;"position"==this.page?(console.log(e),function(t,e){return e=l.stringify(e,{arrayFormat:"brackets"}),Object(r.a)({url:"staff/attachPositionStaffs/"+t,method:"post",data:e})}(e,{staff_ids:this.checkList}).then(function(i){t.show=!1,t.$message.success("操作成功"),t.positionId&&t.positionId!=t.activeTab||t.getStaff(e)}).catch(function(t){console.log(t)})):(console.log(e),function(t,e){return e=l.stringify(e,{arrayFormat:"brackets"}),Object(r.a)({url:"permission/attachRoleStaffs/"+t,method:"post",data:e})}(e,{staff_ids:this.checkList}).then(function(i){t.show=!1,t.$message.success("操作成功"),t.positionId&&t.positionId!=t.activeTab||t.getStaff(e)}).catch(function(t){console.log(t)}))},handleDelStaffs:function(){var t=this;0!=this.multipleSelection.length?this.$confirm("确定永久性移除此员工吗?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){console.log(t.multipleSelection);var e=[];t.multipleSelection.forEach(function(t,i){e.push(t.staff_user_id)}),"position"==t.page?function(t,e){return e=l.stringify(e,{arrayFormat:"brackets"}),Object(r.a)({url:"staff/detachPositionStaffs/"+t,method:"post",data:e})}(t.activeTab,{staff_ids:e}).then(function(e){t.getStaff(t.activeTab),t.$message.success("移除成功")}).catch(function(e){console.log(e),t.$message.error("移除失败")}):function(t,e){return e=l.stringify(e,{arrayFormat:"brackets"}),Object(r.a)({url:"permission/detachRoleStaffs/"+t,method:"post",data:e})}(t.activeTab,{staff_ids:e}).then(function(e){t.getStaff(t.activeTab),t.$message.success("移除成功")}).catch(function(e){console.log(e),t.$message.error("移除失败")})}).catch(function(t){}):this.$message.warning("请选择员工进行操作")},resetListQuery:function(){this.listQuery={search:void 0,limit:1e4}},resetCheckstatus:function(t){var e=[];t.forEach(function(t){e.push(t.staff_user_id)}),this.checkList=e},getStaffList:function(t){var e=this;this.resetListQuery(),this.checkList=[],this.editDialog.listLoading=!0,c(this.listQuery).then(function(i){var a=i.success.data;console.log("员工列表",a),e.staffList=a.data,e.listQuery.search||(e.staffList_g=a.data),console.log("全部联系人",e.staffList_g),"position"==e.page?e.getPositionStaffList(t):e.getRoleStaffList(t)}).catch(function(t){console.log(t)})},getPositionStaffList:function(t){var e=this;u(t).then(function(t){var i=t.success.data;console.log("职位员工",i),e.resetCheckstatus(i),e.$refs.scrollbar.wrap.scrollTop=0,e.editDialog.listLoading=!1}).catch(function(t){console.log(t)})},getRoleStaffList:function(t){var e=this;p(t).then(function(t){var i=t.success.data;console.log("角色员工",i),e.resetCheckstatus(i),e.$refs.scrollbar.wrap.scrollTop=0,e.editDialog.listLoading=!1}).catch(function(t){console.log(t)})}},computed:{show:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}},checkedList:function(){var t=this,e=[];return this.checkList.forEach(function(i){var a=t.staffList_g.filter(function(t){return t.staff_user_id==i});e=[].concat(y()(e),y()(a))}),e}},watch:{show:function(t,e){t&&!1!==this.positionId&&(console.log(this.positionId),this.getStaffList(this.positionId))},checkList:function(t,e){console.log("已选员工列表",this.checkedList)}}},k=(i("JM/C"),i("hOvH"),Object(v.a)(w,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"system_selectStaff"},[i("div",[i("el-button",{staticClass:"fl",attrs:{plain:"",size:"position"==t.page?"medium":"small"},on:{click:t.handleSelectionStaff}},[t._v("\n      员工选择\n    ")]),t._v(" "),i("el-button",{staticClass:"fl",attrs:{plain:"",size:"position"==t.page?"medium":"small"},on:{click:t.handleDelStaffs}},[t._v("\n      批量移除\n    ")])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"staffList",staticClass:"goods_list",staticStyle:{width:"100%"},attrs:{data:t.positionStaffList,fit:"",stripe:""},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{align:"left",type:"index",width:"40px"}}),t._v(" "),i("el-table-column",{attrs:{align:"left",type:"selection",width:"30px"}}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"员工姓名",prop:"realname","min-width":"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"member_name"},[i("span",{staticClass:"avatar_img"},[i("img",{directives:[{name:"avatar",rawName:"v-avatar",value:[e.row.avatar_url,e.row.gender],expression:"[scope.row.avatar_url,scope.row.gender]"}]})]),t._v("\n          "+t._s(e.row.realname)+"\n        ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"联系手机"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.mobile))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"职位"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.position?e.row.position.name:""))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"入职时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("formatCreat")(e.row.entry_time)))])]}}])})],1),t._v(" "),i("el-dialog",{staticClass:"goods_dialog",attrs:{title:"选择员工",visible:t.show,width:"746px"},on:{"update:visible":function(e){t.show=e}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.editDialog.listLoading,expression:"editDialog.listLoading"}],staticClass:"selection_staff clearfix"},[i("div",{staticClass:"left_box fl"},[i("div",{staticClass:"left_header clearfix"},[i("el-input",{staticClass:"fl search",attrs:{placeholder:"姓名、手机",clearable:""},on:{change:t.handleSearch},model:{value:t.listQuery.search,callback:function(e){t.$set(t.listQuery,"search",e)},expression:"listQuery.search"}}),t._v(" "),i("el-button",{staticClass:"fl search_btn",attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("\n            搜索\n          ")])],1),t._v(" "),i("div",{staticClass:"left_body"},[i("div",{staticClass:"staff_check_title"},[i("span",[t._v("全部联系人（"+t._s(t.staffList.length)+"人）")])]),t._v(" "),i("div",{staticClass:"staff_checkbox"},[i("el-scrollbar",{ref:"scrollbar",staticClass:"scrollbar"},[i("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.staffList,function(e,a,o){return i("el-checkbox",{key:o,attrs:{label:e.staff_user_id}},[i("div",{staticClass:"member_name"},[i("span",{staticClass:"avatar_img"},[i("img",{directives:[{name:"avatar",rawName:"v-avatar",value:[e.avatar_url,e.gender],expression:"[item.avatar_url,item.gender]"}]})]),t._v("\n                    "+t._s(e.realname)+"\n                  ")])])}))],1)],1)])]),t._v(" "),i("div",{staticClass:"right_box fr"},[i("div",{staticClass:"border_box"}),t._v(" "),i("div",{staticClass:"right_header"},[i("span",[t._v("已选择（"+t._s(t.checkedList.length)+"人）")])]),t._v(" "),i("div",{staticClass:"right_body"},[i("el-scrollbar",{staticClass:"scrollbar"},[i("ul",t._l(t.checkedList,function(e,a,o){return i("li",{key:o,staticClass:"clearfix checked_staff_list"},[i("div",{staticClass:"member_name fl"},[i("span",{staticClass:"avatar_img"},[i("img",{directives:[{name:"avatar",rawName:"v-avatar",value:[e.avatar_url,e.gender],expression:"[item.avatar_url,item.gender]"}]})]),t._v("\n                  "+t._s(e.realname)+"\n                ")]),t._v(" "),i("span",{staticClass:"fr remove_btn",on:{click:function(i){t.handleRemoveChecked(e.id)}}},[t._v("移除")])])}))])],1)])]),t._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"vertical-align":"middle"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.show=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.updateCheckList}},[t._v("确 定")])],1)])],1)},[],!1,null,"2edb5ffa",null));k.options.__file="selectStaff.vue";var L=k.exports,S={name:"position",provide:function(){return{getStaff:this.getPositionStaffList}},props:{},components:{selectStaff:L},filters:{},data:function(){return{page:"position",activeName:"",activeTab:" ",positionList:[],positionStaffList:[],listLoading:!1,positionId:"",rules:{name:[{required:!0,trigger:"blur"}]},dialogStatus:"",editDialog:{title:{create:"新增职位",edit:"编辑职位"},createEditVisible:!1,dialogEditFormVisible:!1},createTemp:{id:void 0,name:void 0}}},methods:{handleCommand:function(t,e){if("select"==e){console.log(e);var i=t.id;this.positionId=i,this.editDialog.dialogEditFormVisible=!0}else"edit"==e?(console.log(e),this.handleEdit(t)):(console.log(e),this.handleDelPosition(t))},resetCreateTemp:function(){this.createTemp={id:void 0,name:void 0}},handleAdd:function(){var t=this;this.resetCreateTemp(),this.dialogStatus="create",this.editDialog.createEditVisible=!0,this.$nextTick(function(){t.$refs.createForm.clearValidate()})},createData:function(){var t=this;this.$refs.createForm.validate(function(e){e&&function(t){return Object(r.a)({url:"staff/position",method:"post",data:t})}({name:t.createTemp.name}).then(function(e){t.getPositionList(),t.editDialog.createEditVisible=!1,t.$message.success("新增成功")}).catch(function(t){console.log(t)})})},handleEdit:function(t){var e=this;this.resetCreateTemp();var i=t.id,a=t.name;this.createTemp=o()({},this.createTemp,{id:i,name:a}),console.log("编辑createTemp:",this.createTemp),this.dialogStatus="edit",this.editDialog.createEditVisible=!0,this.$nextTick(function(){e.$refs.createForm.clearValidate()})},updateData:function(){var t=this;this.$refs.createForm.validate(function(e){if(e){var i=t.createTemp,a=i.id,o=i.name;(function(t,e){return Object(r.a)({url:"staff/position/"+t,method:"patch",data:e})})(a,{name:o}).then(function(e){t.activeTab==a&&t.getPositionStaffList(a),t.getPositionList(),t.editDialog.createEditVisible=!1,t.$message.success("编辑成功")}).catch(function(t){console.log(t)})}})},handleDelPosition:function(t){var e=this;this.$confirm("确定永久性删除此职位吗?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){console.log("删除");var i=t.id;(function(t){return Object(r.a)({url:"staff/position/"+t,method:"delete"})})(i).then(function(t){e.getPositionList(),e.activeTab==i&&(e.positionStaffList=[],e.activeTab=" "),e.$message.success("删除成功")})}).catch(function(t){})},getPositionList:function(){var t=this;return d().then(function(e){var i=e.success.data;t.positionList=i,console.log("职位列表",t.positionList)}).catch(function(t){console.log(t)})},getPositionStaffList:function(t){var e=this;this.listLoading=!0,u(t).then(function(t){var i=t.success.data;console.log("职位员工",i),e.positionStaffList=i,e.listLoading=!1}).catch(function(t){console.log(t)})}},watch:{activeTab:function(t,e){t&&" "!==t&&(console.log("activeTab:",t),this.getPositionStaffList(t))}},created:function(){var t=this;console.log("position"),this.getPositionList().then(function(e){t.positionList.length&&(t.activeTab=t.positionList[0].id+"")})},mounted:function(){}},C=(i("76wh"),i("qxG3"),Object(v.a)(S,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container system_position_tab"},[i("div",{staticClass:"position_box"},[i("div",{staticClass:"left_content"},[i("div",[i("el-button",{staticClass:"addButton",attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("\n          新增职位\n        ")])],1),t._v(" "),i("div",{staticClass:"position_list"},[i("el-scrollbar",{staticClass:"scrollbar"},[i("div",{staticClass:"position_info"},[i("el-tabs",{attrs:{"tab-position":"left"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.positionList,function(e,a,o){return i("el-tab-pane",{key:o,attrs:{name:e.id+""}},[i("div",{staticClass:"clearfix",attrs:{slot:"label"},slot:"label"},[i("div",{staticClass:"position_name fl"},[t._v("\n                    "+t._s(e.name)+"\n                  ")]),t._v(" "),i("el-dropdown",{staticClass:"fr",attrs:{trigger:"click"},on:{command:function(i){t.handleCommand(e,i)}},nativeOn:{click:function(t){t.stopPropagation()}}},[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"el-icon-more el-icon--right"})]),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"select"}},[t._v("选择员工")]),t._v(" "),i("el-dropdown-item",{attrs:{command:"edit"}},[t._v("编辑职位")]),t._v(" "),i("el-dropdown-item",{attrs:{command:"del"}},[t._v("删除职位")])],1)],1)],1)])}))],1)])],1)]),t._v(" "),i("div",{staticClass:"right_content"},[i("select-staff",{attrs:{positionStaffList:t.positionStaffList,listLoading:t.listLoading,activeTab:t.activeTab,positionId:t.positionId,visible:t.editDialog.dialogEditFormVisible,page:t.page},on:{"update:listLoading":function(e){t.listLoading=e},"update:positionId":function(e){t.positionId=e},"update:visible":function(e){t.$set(t.editDialog,"dialogEditFormVisible",e)}}})],1)]),t._v(" "),i("el-dialog",{staticClass:"create_dialog",attrs:{title:t.editDialog.title[t.dialogStatus],visible:t.editDialog.createEditVisible,width:"420px"},on:{"update:visible":function(e){t.$set(t.editDialog,"createEditVisible",e)}}},[i("div",[i("el-form",{ref:"createForm",attrs:{"label-position":"right","label-width":"50px","show-message":!1,rules:t.rules,model:t.createTemp}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{model:{value:t.createTemp.name,callback:function(e){t.$set(t.createTemp,"name",e)},expression:"createTemp.name"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"vertical-align":"middle"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.editDialog.createEditVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){"create"==t.dialogStatus?t.createData():t.updateData()}}},[t._v("确 定")])],1)])],1)},[],!1,null,"d5520390",null));C.options.__file="position.vue";var x=C.exports,T={name:"role",provide:function(){return{getStaff:this.getRoleStaffList}},props:{},components:{selectStaff:L},data:function(){return{page:"role",activeName:"role",activeTab:" ",activeGroup:"",groupList:[],roleStaffList:[],listLoading:!1,roleId:"",rules:{name:[{required:!0,trigger:"blur"}],group_id:[{required:!0,trigger:"blur"}]},editGroupTemp:{id:void 0,name:void 0},editRolesTemp:{id:void 0,selectShow:!0,item:{name:void 0,group_id:void 0,remark:void 0}},dialogStatus:"",editDialog:{editGroupVisible:!1,editRoleVisible:!1,dialogEditFormVisible:!1,title:{createGroup:"新增角色组",editGroup:"编辑角色组",createRole:"新增角色",editRole:"编辑角色"}},permission:{loading:!1,list:[],cash:{status:!1,checkList:[]},checkAll:[],checkList:[]},timer:null}},methods:{handleCommandGroup:function(t,e){"create"==e?(console.log(e),this.handleAddRole(t)):"edit"==e?(console.log(e),this.handleEditGroup(t)):(console.log(e),this.handleDelGroup(t))},handleCommandRole:function(t,e){if("select"==e){console.log(e);var i=t.id;this.roleId=i,this.editDialog.dialogEditFormVisible=!0}else"edit"==e?(console.log(e),this.handleEditRole(t)):(console.log(e),this.handleDelRole(t))},resetEditGroupTemp:function(){this.editGroupTemp={id:void 0,name:void 0}},resetEditRolesTemp:function(){this.editRolesTemp={id:void 0,selectShow:!0,item:{name:void 0,group_id:void 0,remark:void 0}}},handleAddGroup:function(){var t=this;this.resetEditGroupTemp(),this.dialogStatus="createGroup",this.editDialog.editGroupVisible=!0,this.$nextTick(function(){t.$refs.editGroupForm.clearValidate()})},createGroupData:function(){var t=this;this.$refs.editGroupForm.validate(function(e){e&&function(t){return Object(r.a)({url:"permission/group",method:"post",data:t})}({name:t.editGroupTemp.name}).then(function(e){t.getGroupList(),t.editDialog.editGroupVisible=!1,t.$message.success("新增成功")}).catch(function(t){console.log(t)})})},handleEditGroup:function(t){var e=this;this.resetEditGroupTemp();var i=t.id,a=t.name;this.editGroupTemp=o()({},this.editGroupTemp,{id:i,name:a}),console.log("编辑editGroupTemp:",this.editGroupTemp),this.dialogStatus="editGroup",this.editDialog.editGroupVisible=!0,this.$nextTick(function(){e.$refs.editGroupForm.clearValidate()})},updateGroupData:function(){var t=this;this.$refs.editGroupForm.validate(function(e){if(e){var i=t.editGroupTemp;(function(t,e){return Object(r.a)({url:"permission/group/"+t,method:"patch",data:e})})(i.id,{name:i.name}).then(function(e){t.getGroupList(),t.editDialog.editGroupVisible=!1,t.$message.success("编辑成功")}).catch(function(t){console.log(t)})}})},handleDelGroup:function(t){var e=this;this.$confirm("确定永久性删除此角色组吗?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){console.log("删除"),function(t){return Object(r.a)({url:"permission/group/"+t,method:"delete"})}(t.id).then(function(t){e.getGroupList(),e.$message.success("删除成功")})}).catch(function(t){})},handleAddRole:function(t){var e=this;this.resetEditRolesTemp(),t&&(this.editRolesTemp.item.group_id=t.id,this.editRolesTemp.selectShow=!1),this.dialogStatus="createRole",this.editDialog.editRoleVisible=!0,this.$nextTick(function(){e.$refs.editRoleForm.clearValidate()})},createRoleData:function(){var t=this;this.$refs.editRoleForm.validate(function(e){e&&function(t){return Object(r.a)({url:"permission/role",method:"post",data:t})}(t.editRolesTemp.item).then(function(e){t.getGroupList(),t.editDialog.editRoleVisible=!1,t.$message.success("新增成功")}).catch(function(t){console.log(t)})})},handleEditRole:function(t){var e=this;this.resetEditGroupTemp(),this.dialogStatus="editRole";var i=t.id,a=t.name,s=t.group_id,n=t.remark;this.editRolesTemp=o()({},this.editRolesTemp,{id:i,item:{name:a,group_id:s,remark:n}}),console.log("编辑editRoleTemp:",this.editRolesTemp),this.dialogStatus="editRole",this.editDialog.editRoleVisible=!0,this.$nextTick(function(){e.$refs.editRoleForm.clearValidate()})},updateRoleData:function(){var t=this;this.$refs.editRoleForm.validate(function(e){if(e){var i=t.editRolesTemp;(function(t,e){return Object(r.a)({url:"permission/role/"+t,method:"patch",data:e})})(i.id,i.item).then(function(e){t.getGroupList(),t.editDialog.editRoleVisible=!1,t.$message.success("编辑成功")}).catch(function(t){console.log(t)})}})},handleDelRole:function(t){var e=this;this.$confirm("确定永久性删除此角色吗?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){console.log("删除");var i=t.id;(function(t){return Object(r.a)({url:"permission/role/"+t,method:"delete"})})(i).then(function(t){e.getGroupList(),e.activeTab==i&&(e.roleStaffList=[],e.permission.list=[],e.activeTab=" "),e.$message.success("删除成功")})}).catch(function(t){})},getGroupList:function(){var t=this;return f().then(function(e){var i=e.success.data;t.groupList=i,console.log("角色组列表",i)}).catch(function(t){})},getRoleStaffList:function(t){var e=this;this.listLoading=!0,p(t).then(function(t){var i=t.success.data;console.log("角色员工",i),e.roleStaffList=i,e.listLoading=!1}).catch(function(t){console.log(t)})},getPermissionMenus:function(){var t=this;Object(r.a)({url:"permission/menus",method:"get"}).then(function(e){var i=e.success.data;console.log("权限菜单",i),t.permission.list=i}).catch(function(t){console.log("权限菜单",t)})},getRolePermissions:function(){var t=this;" "!==this.activeTab&&(this.permission.loading=!0,function(t){return Object(r.a)({url:"permission/getRolePermissions/"+t,method:"get"})}(this.activeTab).then(function(e){var i=e.success.data;console.log("用户权限",i);var a=[];i.forEach(function(t){(t.type="menu")&&a.push(t.target_id)}),t.permission.checkList=a,t.permission.loading=!1}).catch(function(t){console.log("用户权限",t)}))},handleCheckAllStatus:function(t){},handleCheckAll:function(t,e,i){var a=this;if(e){var o=[];e.forEach(function(t){o.push(t.id)}),i?o.forEach(function(t){if(a.permission.checkList.indexOf(t)<0){var e=a.permission.checkList.length;a.permission.checkList.splice(e,1,t)}}):o.forEach(function(t){var e=a.permission.checkList.indexOf(t);e>=0&&a.permission.checkList.splice(e,1)})}this.debounce()},handleCheck:function(t,e){var i=this,a=[];e.forEach(function(t){a.push(t.id)});var o=a.some(function(t){return i.permission.checkList.includes(t)}),s=this.permission.checkList.indexOf(t);if(o&&s<0){var n=this.permission.checkList.length;this.permission.checkList.splice(n,1,t)}else!o&&s>0&&this.permission.checkList.splice(s,1);this.debounce()},debounce:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.handleSyncRoleMenuPermissions()},1500)},handleSyncRoleMenuPermissions:function(){var t=this;(function(t){return t=l.stringify(t,{arrayFormat:"brackets"}),Object(r.a)({url:"permission/syncRoleMenuPermissions",method:"post",data:t})})({role_id:this.activeTab,menu_ids:this.permission.checkList}).then(function(e){t.getRolePermissions(),t.$message.success("修改权限成功")}).catch(function(e){console.log(e),t.getRolePermissions()})}},created:function(){var t=this;console.log("role"),this.getGroupList().then(function(e){if(t.groupList.length)try{t.groupList.forEach(function(e,i){if(e.roles.length)throw t.activeGroup=t.groupList[i].id,t.activeTab=e.roles[0].id+"",new Error("")})}catch(t){}})},computed:{},watch:{activeTab:function(t,e){t&&" "!==t&&(console.log("activeTab:",t),this.getPermissionMenus(),this.getRolePermissions(),this.getRoleStaffList(t))},activeName:function(t,e){this.groupList.length||"permission"!==t||this.$message.warning("请先设置角色组及所属角色")}}},D=(i("OOfb"),i("y8gY"),Object(v.a)(T,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container system_role_tab"},[i("div",{staticClass:"role_box"},[i("div",{staticClass:"left_content"},[i("div",{staticClass:"clearfix"},[i("el-button",{staticClass:"addButton fl",attrs:{type:"primary"},on:{click:t.handleAddGroup}},[t._v("\n          新增角色组\n        ")]),t._v(" "),i("el-button",{staticClass:"addButton fr",attrs:{type:"primary"},on:{click:function(e){t.handleAddRole()}}},[t._v("\n          新增角色\n        ")])],1),t._v(" "),i("div",{staticClass:"position_list"},[i("el-scrollbar",{staticClass:"scrollbar"},[i("el-collapse",{model:{value:t.activeGroup,callback:function(e){t.activeGroup=e},expression:"activeGroup"}},t._l(t.groupList,function(e){return i("el-collapse-item",{key:e.id,class:[e.roles.length?"":"icon_visible"],attrs:{name:e.id}},[i("template",{slot:"title"},[i("span",[t._v("\n                  "+t._s(e.name)+"\n                ")]),t._v(" "),i("el-dropdown",{staticClass:"fr",attrs:{trigger:"click"},on:{command:function(i){t.handleCommandGroup(e,i)}},nativeOn:{click:function(t){t.stopPropagation()}}},[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"el-icon-more el-icon--right"})]),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"create"}},[t._v("新增角色")]),t._v(" "),i("el-dropdown-item",{attrs:{command:"edit"}},[t._v("编辑角色组")]),t._v(" "),i("el-dropdown-item",{attrs:{command:"del"}},[t._v("删除角色组")])],1)],1)],1),t._v(" "),e.roles.length?i("div",{staticClass:"position_info"},[i("el-tabs",{attrs:{"tab-position":"left"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(e.roles,function(e){return i("el-tab-pane",{key:e.id,attrs:{name:e.id+""}},[i("div",{staticClass:"clearfix",attrs:{slot:"label"},slot:"label"},[i("div",{staticClass:"position_name fl"},[t._v("\n                        "+t._s(e.name)+"\n                      ")]),t._v(" "),i("el-dropdown",{staticClass:"fr",attrs:{trigger:"click"},on:{command:function(i){t.handleCommandRole(e,i)}},nativeOn:{click:function(t){t.stopPropagation()}}},[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"el-icon-more el-icon--right"})]),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"select"}},[t._v("选择员工")]),t._v(" "),i("el-dropdown-item",{attrs:{command:"edit"}},[t._v("编辑角色")]),t._v(" "),i("el-dropdown-item",{attrs:{command:"del"}},[t._v("删除角色")])],1)],1)],1)])}))],1):t._e()],2)}))],1)],1)]),t._v(" "),i("div",{staticClass:"right_content"},[i("el-tabs",{staticClass:"right_tab",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"角色成员",name:"role"}},[i("div",[i("select-staff",{attrs:{positionStaffList:t.roleStaffList,listLoading:t.listLoading,activeTab:t.activeTab,positionId:t.roleId,visible:t.editDialog.dialogEditFormVisible,page:t.page},on:{"update:listLoading":function(e){t.listLoading=e},"update:positionId":function(e){t.roleId=e},"update:visible":function(e){t.$set(t.editDialog,"dialogEditFormVisible",e)}}})],1)]),t._v(" "),i("el-tab-pane",{attrs:{label:"功能权限",name:"permission"}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.permission.loading,expression:"permission.loading"}],staticClass:"permission_box"},t._l(t.permission.list,function(e,a,o){return i("div",{key:o,staticClass:"check_box"},[i("el-checkbox-group",{on:{change:t.handleCheckAllStatus},model:{value:t.permission.checkList,callback:function(e){t.$set(t.permission,"checkList",e)},expression:"permission.checkList"}},[i("div",{staticClass:"check_all"},[i("el-checkbox",{attrs:{label:e.id},on:{change:function(i){t.handleCheckAll(e.id,e.children,i)}}},[t._v(t._s(e.title))])],1),t._v(" "),i("div",{staticClass:"check_permission"},t._l(e.children,function(a,o,s){return i("el-checkbox",{key:s,attrs:{label:a.id},on:{change:function(i){t.handleCheck(e.id,e.children)}}},[t._v(t._s(a.title))])}))])],1)}))])],1)],1)]),t._v(" "),i("el-dialog",{staticClass:"editGroup_dialog",attrs:{title:t.editDialog.title[t.dialogStatus],visible:t.editDialog.editGroupVisible,width:"420px"},on:{"update:visible":function(e){t.$set(t.editDialog,"editGroupVisible",e)}}},[i("div",[i("el-form",{ref:"editGroupForm",attrs:{"label-position":"right","label-width":"50px","show-message":!1,rules:t.rules,model:t.editGroupTemp}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{model:{value:t.editGroupTemp.name,callback:function(e){t.$set(t.editGroupTemp,"name",e)},expression:"editGroupTemp.name"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"vertical-align":"middle"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.editDialog.editGroupVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){"createGroup"==t.dialogStatus?t.createGroupData():t.updateGroupData()}}},[t._v("确 定")])],1)]),t._v(" "),i("el-dialog",{staticClass:"editRole_dialog",attrs:{title:t.editDialog.title[t.dialogStatus],visible:t.editDialog.editRoleVisible,width:"746px"},on:{"update:visible":function(e){t.$set(t.editDialog,"editRoleVisible",e)}}},[i("div",{staticClass:"editRole_content clearfix"},[i("el-form",{ref:"editRoleForm",attrs:{"label-position":"right","label-width":"80px","show-message":!1,rules:t.rules,model:t.editRolesTemp.item}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{model:{value:t.editRolesTemp.item.name,callback:function(e){t.$set(t.editRolesTemp.item,"name","string"==typeof e?e.trim():e)},expression:"editRolesTemp.item.name"}})],1),t._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.editRolesTemp.selectShow,expression:"editRolesTemp.selectShow"}],attrs:{label:"角色组",prop:"group_id"}},[i("el-select",{model:{value:t.editRolesTemp.item.group_id,callback:function(e){t.$set(t.editRolesTemp.item,"group_id",e)},expression:"editRolesTemp.item.group_id"}},t._l(t.groupList,function(t,e,a){return i("el-option",{key:a,attrs:{label:t.name,value:t.id}})}))],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"vertical-align":"middle"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.editDialog.editRoleVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){"createRole"==t.dialogStatus?t.createRoleData():t.updateRoleData()}}},[t._v("确 定")])],1)])],1)},[],!1,null,"f728edda",null));D.options.__file="role.vue";var O={name:"system_staff",components:{Staff:b,Position:x,Role:D.exports},data:function(){return{activeName:"staff",tabList:[{name:"staff",label:"员工管理"},{name:"position",label:"职位管理"},{name:"role",label:"角色管理"}]}},methods:{}},$=(i("Zjm+"),i("nPkY"),Object(v.a)(O,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container system_staff"},[i("el-card",{staticClass:"card-box  mb-15",attrs:{shadow:"always"}},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.tabList,function(e,a,o){return i("el-tab-pane",{key:o,attrs:{label:e.label,name:e.name}},[t.activeName==e.name?i(e.name,{tag:"component",attrs:{activeName:t.activeName}}):t._e()],1)}))],1)],1)},[],!1,null,"7284f59f",null));$.options.__file="index.vue";e.default=$.exports},Ms11:function(t,e,i){},Nlzp:function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"b",function(){return s}),i.d(e,"c",function(){return n});var a=i("t3Un");function o(t){var e=t.start_date,i=t.end_date;return Object(a.a)({url:"statistics/indexData",method:"get",params:{start_date:e,end_date:i}})}function s(){return Object(a.a)({url:"statistics/indexGraphData",method:"get",params:{}})}var n="http://api.zgyjyy.com/storeApi/upload/images"},OOfb:function(t,e,i){"use strict";var a=i("c/M+");i.n(a).a},PjVy:function(t,e,i){},QJmv:function(t,e,i){},WFa2:function(t,e,i){"use strict";var a=i("zDgb"),o=Object.prototype.hasOwnProperty,s={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:a.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},n=function(t,e,i){if(t){var a=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,s=/(\[[^[\]]*])/g,n=/(\[[^[\]]*])/.exec(a),r=n?a.slice(0,n.index):a,l=[];if(r){if(!i.plainObjects&&o.call(Object.prototype,r)&&!i.allowPrototypes)return;l.push(r)}for(var c=0;null!==(n=s.exec(a))&&c<i.depth;){if(c+=1,!i.plainObjects&&o.call(Object.prototype,n[1].slice(1,-1))&&!i.allowPrototypes)return;l.push(n[1])}return n&&l.push("["+a.slice(n.index)+"]"),function(t,e,i){for(var a=e,o=t.length-1;o>=0;--o){var s,n=t[o];if("[]"===n)s=(s=[]).concat(a);else{s=i.plainObjects?Object.create(null):{};var r="["===n.charAt(0)&&"]"===n.charAt(n.length-1)?n.slice(1,-1):n,l=parseInt(r,10);!isNaN(l)&&n!==r&&String(l)===r&&l>=0&&i.parseArrays&&l<=i.arrayLimit?(s=[])[l]=a:s[r]=a}a=s}return a}(l,e,i)}};t.exports=function(t,e){var i=e?a.assign({},e):{};if(null!==i.decoder&&void 0!==i.decoder&&"function"!=typeof i.decoder)throw new TypeError("Decoder has to be a function.");if(i.ignoreQueryPrefix=!0===i.ignoreQueryPrefix,i.delimiter="string"==typeof i.delimiter||a.isRegExp(i.delimiter)?i.delimiter:s.delimiter,i.depth="number"==typeof i.depth?i.depth:s.depth,i.arrayLimit="number"==typeof i.arrayLimit?i.arrayLimit:s.arrayLimit,i.parseArrays=!1!==i.parseArrays,i.decoder="function"==typeof i.decoder?i.decoder:s.decoder,i.allowDots="boolean"==typeof i.allowDots?i.allowDots:s.allowDots,i.plainObjects="boolean"==typeof i.plainObjects?i.plainObjects:s.plainObjects,i.allowPrototypes="boolean"==typeof i.allowPrototypes?i.allowPrototypes:s.allowPrototypes,i.parameterLimit="number"==typeof i.parameterLimit?i.parameterLimit:s.parameterLimit,i.strictNullHandling="boolean"==typeof i.strictNullHandling?i.strictNullHandling:s.strictNullHandling,""===t||null===t||void 0===t)return i.plainObjects?Object.create(null):{};for(var r="string"==typeof t?function(t,e){for(var i={},a=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,n=e.parameterLimit===1/0?void 0:e.parameterLimit,r=a.split(e.delimiter,n),l=0;l<r.length;++l){var c,d,u=r[l],f=u.indexOf("]="),p=-1===f?u.indexOf("="):f+1;-1===p?(c=e.decoder(u,s.decoder),d=e.strictNullHandling?null:""):(c=e.decoder(u.slice(0,p),s.decoder),d=e.decoder(u.slice(p+1),s.decoder)),o.call(i,c)?i[c]=[].concat(i[c]).concat(d):i[c]=d}return i}(t,i):t,l=i.plainObjects?Object.create(null):{},c=Object.keys(r),d=0;d<c.length;++d){var u=c[d],f=n(u,r[u],i);l=a.merge(l,f,i)}return a.compact(l)}},XOEO:function(t,e,i){"use strict";var a=i("vFD1");i.n(a).a},Y5bG:function(t,e,i){"use strict";i.d(e,"a",function(){return o}),Math.easeInOutQuad=function(t,e,i,a){return(t/=a/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e};var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function o(t,e,i){var o=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,s=t-o,n=0;e=void 0===e?500:e;!function t(){n+=20,function(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}(Math.easeInOutQuad(n,o,s,e)),n<e?a(t):i&&"function"==typeof i&&i()}()}},"Zjm+":function(t,e,i){"use strict";var a=i("xBS9");i.n(a).a},a5ZE:function(t,e,i){"use strict";var a=String.prototype.replace,o=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return a.call(t,o,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},"c/M+":function(t,e,i){},hOvH:function(t,e,i){"use strict";var a=i("QJmv");i.n(a).a},nPkY:function(t,e,i){"use strict";var a=i("+r/X");i.n(a).a},qxG3:function(t,e,i){"use strict";var a=i("PjVy");i.n(a).a},"un+E":function(t,e,i){"use strict";var a=i("2+ht");i.n(a).a},vFD1:function(t,e,i){},xBS9:function(t,e,i){},y8gY:function(t,e,i){"use strict";var a=i("4mcY");i.n(a).a},zDgb:function(t,e,i){"use strict";var a=Object.prototype.hasOwnProperty,o=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),s=function(t,e){for(var i=e&&e.plainObjects?Object.create(null):{},a=0;a<t.length;++a)void 0!==t[a]&&(i[a]=t[a]);return i};t.exports={arrayToObject:s,assign:function(t,e){return Object.keys(e).reduce(function(t,i){return t[i]=e[i],t},t)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],i=[],a=0;a<e.length;++a)for(var o=e[a],s=o.obj[o.prop],n=Object.keys(s),r=0;r<n.length;++r){var l=n[r],c=s[l];"object"==typeof c&&null!==c&&-1===i.indexOf(c)&&(e.push({obj:s,prop:l}),i.push(c))}return function(t){for(var e;t.length;){var i=t.pop();if(e=i.obj[i.prop],Array.isArray(e)){for(var a=[],o=0;o<e.length;++o)void 0!==e[o]&&a.push(e[o]);i.obj[i.prop]=a}}return e}(e)},decode:function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},encode:function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),i="",a=0;a<e.length;++a){var s=e.charCodeAt(a);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?i+=e.charAt(a):s<128?i+=o[s]:s<2048?i+=o[192|s>>6]+o[128|63&s]:s<55296||s>=57344?i+=o[224|s>>12]+o[128|s>>6&63]+o[128|63&s]:(a+=1,s=65536+((1023&s)<<10|1023&e.charCodeAt(a)),i+=o[240|s>>18]+o[128|s>>12&63]+o[128|s>>6&63]+o[128|63&s])}return i},isBuffer:function(t){return null!==t&&void 0!==t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,i,o){if(!i)return e;if("object"!=typeof i){if(Array.isArray(e))e.push(i);else{if("object"!=typeof e)return[e,i];(o.plainObjects||o.allowPrototypes||!a.call(Object.prototype,i))&&(e[i]=!0)}return e}if("object"!=typeof e)return[e].concat(i);var n=e;return Array.isArray(e)&&!Array.isArray(i)&&(n=s(e,o)),Array.isArray(e)&&Array.isArray(i)?(i.forEach(function(i,s){a.call(e,s)?e[s]&&"object"==typeof e[s]?e[s]=t(e[s],i,o):e.push(i):e[s]=i}),e):Object.keys(i).reduce(function(e,s){var n=i[s];return a.call(e,s)?e[s]=t(e[s],n,o):e[s]=n,e},n)}}}}]);