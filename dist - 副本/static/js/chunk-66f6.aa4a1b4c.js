(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-66f6"],{"+lHu":function(t,e,a){"use strict";var s=a("Qk18");a.n(s).a},JrM1:function(t,e,a){a("fkkz")("Map")},"O1/W":function(t,e,a){a("zGh1")("Map")},Qk18:function(t,e,a){},RdEy:function(t,e,a){t.exports={default:a("qJDZ"),__esModule:!0}},aeA9:function(t,e,a){"use strict";a.r(e);var s=a("bS4n"),i=a.n(s),r=a("EPZ6"),n=a.n(r),l=a("rerW"),o=a.n(l),_=a("unDg"),d=a.n(_),c=a("RdEy"),u=a.n(c),p=a("+XIM"),v=a.n(p),g=(a("7Qib"),a("Mz3J")),h=a("MxCn"),f=a("+wx0"),m=a("mNfr"),y=a("Dk0a"),w=a("9jzW"),b=(a("a/LZ"),{name:"cash_order",components:{Pagination:g.a,DateQuery:f.a,MyPrintButton:h.a,DetailDialog:w.a},data:function(){return{globals:y,loading:!1,filter:{start_time:"",end_time:"",operator:"",payway:"",status:"",search:""},highFilter:{show:!1,pay_list:[],operate_list:[],statu_list:[]},orderList:[],paginate:{page:1,page_size:10,total:0},detailDialog:{show:!1,order_id:""}}},computed:{filterBtnName:function(){return this.highFilter.show?"关闭查询":"高级查询"}},created:function(){this.getSearchData()},methods:{getDateQuery:function(t){var e=v()(t,2);this.filter.start_time=e[0],this.filter.end_time=e[1],this.getOrderList()},getSearchData:function(){var t=this;Object(m.d)().then(function(e){var a=e.success.data;t.highFilter.operate_list=a.operate_list,t.highFilter.pay_list=a.pay_list;var s=new u.a,i=!0,r=!1,l=void 0;try{for(var _,c=o()(n()(a.pay_list));!(i=(_=c.next()).done);i=!0){var p=_.value;s.set(p,a.pay_list[p])}}catch(t){r=!0,l=t}finally{try{!i&&c.return&&c.return()}finally{if(r)throw l}}t.highFilter.pay_list=[].concat(d()(s)),t.highFilter.statu_list=a.statu_list})},getOrderList:function(){var t=this;this.loading=!0;var e=i()({page:this.paginate.page,page_size:this.paginate.page_size},this.filter);Object(m.b)(e).then(function(e){t.loading=!1;var a=e.success.data;t.orderList=a,t.paginate.total=a.total})},orderInfoShow:function(t){this.detailDialog={show:!0,order_id:t}}}}),C=(a("+lHu"),a("ZrdR")),x=Object(C.a)(b,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-container cash-order-page"},[s("date-query",{on:{dateQuery:function(e){t.getDateQuery(e)}}}),t._v(" "),s("el-card",{staticClass:"order-box mb-15",attrs:{shadow:"always"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"header"},[t._v("订单列表")]),t._v(" "),s("div",{staticClass:"fr search-box"},[s("el-input",{staticClass:"search fl",attrs:{placeholder:"姓名、手机号、订单编号、产品名称","prefix-icon":"el-icon-search",clearable:""},on:{clear:t.getOrderList},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getOrderList(e):null}},model:{value:t.filter.search,callback:function(e){t.$set(t.filter,"search",e)},expression:"filter.search"}}),t._v(" "),s("el-button",{staticClass:"fl",on:{click:function(e){t.highFilter.show=!t.highFilter.show}}},[t._v(t._s(t.filterBtnName))])],1)]),t._v(" "),s("el-collapse-transition",[s("div",{directives:[{name:"show",rawName:"v-show",value:t.highFilter.show,expression:"highFilter.show"}],staticClass:"high-filter"},[t.highFilter.pay_list?s("el-row",[s("span",{staticClass:"filter-name"},[t._v("支付方式")]),t._v(" "),s("el-radio-group",{on:{change:t.getOrderList},model:{value:t.filter.payway,callback:function(e){t.$set(t.filter,"payway",e)},expression:"filter.payway"}},[s("el-radio-button",{attrs:{label:""}},[t._v("全部")]),t._v(" "),t._l(t.highFilter.pay_list,function(e){return s("el-radio-button",{key:"payway-"+e[0],attrs:{label:e[0]}},[t._v("\n              "+t._s(e[1])+"\n            ")])})],2)],1):t._e(),t._v(" "),s("el-row",[s("span",{staticClass:"filter-name"},[t._v("订单状态")]),t._v(" "),s("el-radio-group",{on:{change:t.getOrderList},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}},[s("el-radio-button",{attrs:{label:""}},[t._v("全部")]),t._v(" "),t._l(t.highFilter.statu_list,function(e,a){return s("el-radio-button",{key:"status-"+a,attrs:{label:a}},[t._v("\n              "+t._s(e)+"\n            ")])})],2)],1),t._v(" "),s("el-row",[s("span",{staticClass:"filter-name"},[t._v("操作人员")]),t._v(" "),s("el-radio-group",{on:{change:t.getOrderList},model:{value:t.filter.operator,callback:function(e){t.$set(t.filter,"operator",e)},expression:"filter.operator"}},[s("el-radio-button",{attrs:{label:""}},[t._v("全部")]),t._v(" "),t._l(t.highFilter.operate_list,function(e){return s("el-radio-button",{key:"operator-"+e.id,attrs:{label:e.id}},[t._v("\n              "+t._s(e.realname)+"\n            ")])})],2)],1),t._v(" "),s("el-row",{staticStyle:{display:"none"}},[s("span",{staticClass:"filter-name"},[t._v("是否赠送")]),t._v(" "),s("el-radio-group",[s("el-radio-button",{attrs:{label:""}},[t._v("全部")]),t._v(" "),s("el-radio-button",{attrs:{label:"1"}},[t._v("有赠送")]),t._v(" "),s("el-radio-button",{attrs:{label:"0"}},[t._v("无赠送")])],1)],1)],1)]),t._v(" "),s("div",{staticClass:"order-list-box"},[s("table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"order-table",attrs:{border:"1"}},[s("thead",[s("tr",{staticClass:"uppercase"},[s("th",{attrs:{colspan:"2"}},[t._v("产品名称")]),t._v(" "),s("th",[t._v("单价")]),t._v(" "),s("th",{staticClass:"sales-count"},[t._v("数量")]),t._v(" "),s("th",{staticClass:"text-left"},[t._v("总额")]),t._v(" "),s("th",{staticClass:"text-left"},[t._v("支付方式")]),t._v(" "),s("th",{staticClass:"text-left"},[t._v("顾客")]),t._v(" "),s("th",{staticClass:"text-left"},[t._v("操作人")]),t._v(" "),s("th",{staticClass:"text-left"},[t._v("状态")]),t._v(" "),s("th",{staticClass:"text-left"},[t._v("操作")])])]),t._v(" "),s("tbody",[t._l(t.orderList.data,function(e){return t.orderList.data.length?[s("tr",{staticClass:"table-separation"},[s("td",{attrs:{colspan:"10"}})]),t._v(" "),s("tr",{staticClass:"table-order-title"},[s("td",{attrs:{colspan:"10"}},[s("div",{staticClass:"order-info"},[s("span",[t._v("订单编号:"+t._s(e.no))]),t._v(" "),s("span",[t._v("交易时间:"+t._s(e.updated_at))])])])]),t._v(" "),t._l(e.order_item,function(i,r){return s("tr",[s("td",{staticClass:"goods-img"},[i.item_type===t.globals.RECHARGE?s("img",{attrs:{src:a("cOjo"),alt:""}}):s("img",{directives:[{name:"productImg",rawName:"v-productImg",value:i.image_url,expression:"goodsItem.image_url"}],attrs:{alt:""}})]),t._v(" "),s("td",{staticClass:"goods-name"},[t._v("\n              "+t._s(i.title)+"\n              "),i.is_free?s("el-tag",{attrs:{type:"danger",size:"small"}},[t._v("赠送")]):t._e(),t._v(" "),i.is_advance?s("el-tag",{attrs:{type:"warning",size:"small"}},[t._v("预存")]):t._e()],1),t._v(" "),s("td",[t._v(t._s(t._f("formatMoney")(i.total_amount)))]),t._v(" "),s("td",[t._v(t._s(i.num))]),t._v(" "),0===r?[s("td",{attrs:{rowspan:e.order_item.length}},[t._v("\n                "+t._s(t._f("formatMoney")(e.payment_amount))+"\n                "),s("br"),t._v(" "),s("del",{directives:[{name:"show",rawName:"v-show",value:e.payment_amount!==e.total_amount,expression:"order.payment_amount !==order.total_amount"}]},[t._v("\n                  "+t._s(t._f("formatMoney")(e.total_amount))+"\n                ")])]),t._v(" "),s("td",{attrs:{rowspan:e.order_item.length}},t._l(e.payway_name.split("|"),function(e){return s("p",{key:e.type},[t._v("\n                  "+t._s(e)+"\n                ")])})),t._v(" "),s("td",{attrs:{rowspan:e.order_item.length}},[e.member?[s("p",[t._v(t._s(e.member.realname))]),t._v(" "),s("p",[t._v(t._s(e.member.mobile))])]:s("span",[t._v("散客")])],2),t._v(" "),s("td",{attrs:{rowspan:e.order_item.length}},[t._v(t._s(e.staff_user.realname))]),t._v(" "),s("td",{staticClass:"trading-status",class:2===e.status?"success":"",attrs:{rowspan:e.order_item.length}},[t._v("\n                "+t._s(e.status_name)+"\n              ")]),t._v(" "),s("td",{staticClass:"setting",attrs:{rowspan:e.order_item.length}},[s("el-button",{attrs:{size:"small"},nativeOn:{click:function(a){t.orderInfoShow(e.id)}}},[t._v("详情")]),t._v(" "),s("my-print-button",{attrs:{order_id:e.id}})],1)]:t._e()],2)})]:t._e()})],2)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&!t.paginate.total,expression:"!loading && !paginate.total"}],staticClass:"empty-box",staticStyle:{"text-align":"center",padding:"30px 0"}},[t._v("暂无数据\n      ")]),t._v(" "),s("pagination",{directives:[{name:"show",rawName:"v-show",value:t.paginate.total>0,expression:"paginate.total>0"}],staticClass:"pagination",attrs:{total:t.paginate.total,page:t.paginate.page,limit:t.paginate.page_size},on:{"update:page":function(e){t.$set(t.paginate,"page",e)},"update:limit":function(e){t.$set(t.paginate,"page_size",e)},pagination:t.getOrderList}})],1)],1),t._v(" "),t.detailDialog.show?s("detail-dialog",{ref:"detailDialog",attrs:{show:t.detailDialog.show,order_id:t.detailDialog.order_id},on:{"update:show":function(e){t.$set(t.detailDialog,"show",e)},"refund-success":t.getOrderList}}):t._e()],1)},[],!1,null,null,null);x.options.__file="index.vue";e.default=x.exports},cOjo:function(t,e,a){t.exports=a.p+"static/img/recharge-img.13c5892.png"},g4Bc:function(t,e,a){var s=a("Rx2n");s(s.P+s.R,"Map",{toJSON:a("eQsS")("Map")})},gCqA:function(t,e,a){"use strict";var s=a("iDJi"),i=a("ivm2");t.exports=a("WDep")("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=s.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return s.def(i(this,"Map"),0===t?0:t,e)}},s,!0)},qJDZ:function(t,e,a){a("ELK7"),a("TWys"),a("mL7D"),a("gCqA"),a("g4Bc"),a("JrM1"),a("O1/W"),t.exports=a("g24s").Map}}]);