(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-d480"],{"+fqf":function(t,e,i){},XTKO:function(t,e,i){"use strict";var a=i("rGgU");i.n(a).a},dEGq:function(t,e,i){"use strict";var a=i("+fqf");i.n(a).a},rGgU:function(t,e,i){},"sav/":function(t,e,i){"use strict";i.r(e);var a=i("unDg"),o=i.n(a),s=i("6ZY3"),l=i.n(s),n=i("Mz3J"),r=i("GquX"),c=i("dsdk"),d=i("ISyM"),u=i("xA6U"),m=i("7Qib"),p={name:"product_card",components:{Pagination:n.a,synchrodataDialog:r.a,actionBar:c.a,uploadImage:d.a},filters:{},data:function(){var t=function(t,e,i){if(""==e||void 0==e)i();else{/^(\-|\+)?\d+(\.\d+)?$/.test(e)?i():i(new Error)}};return{commandFilterList:[],multipleSelection:[],listLoading:!0,goodsList:[],temp:{id:null,tcard_items:[],item:{is_limit:1,name:"",category_id:null,price:"",remark:"",imageurl:"",items_id:"",times:"",avg_price:"",exp:12,exp_unit:1,is_expired_vaild:1}},dialogEditFormVisible:!1,synchrodataDialog:{show:!1,activeName:2},dialogStatus:"",dialogTitle:{create:"新增次卡",edit:"编辑次卡"},editStatus:{autoAdd:!1,autoCoding:!1},rules:{price:[{required:!0,trigger:"blur",message:"单价不能为空"},{validator:t,trigger:"blur",message:"单价格式不正确"}],is_limit:[{required:!0,trigger:"blur",message:"次卡类型不能为空"}],category_id:[{required:!0,trigger:"blur",message:"分类不能为空"}],exp:[{required:!0,trigger:"blur",message:"时效不能为空"},{validator:t,trigger:"blur",message:"时效格式不正确"}],name:[{required:!0,trigger:"blur",message:"卡片名称不能为空"}]},showProductList:[{name:"22",price:"11",number:1,oneprice:"11"}],innerAddItemVisible:!1,activeName:"0",addFilterList:[],addItemList:[],addListLoading:!0,addFilter:{category_id:void 0,search:void 0},addMultipleSelection:[],listQuery:{page:1,limit:10,category_id:"",search:""},total:0,layout:" sizes, jumper, next, pager, prev, total",activeTab:"0",stopGoodsList:[],stopListLoading:!0,stopListQuery:{page:1,limit:10,type:2},stopTotal:0,multipleSelectionStop:[]}},methods:{handleCommand:function(t){"del"==t?this.showDelBox():"stop"==t?this.showStopBox():this.showSaleBox()},handleGoodsFilter:function(){this.listQuery.page=1,this.getGoodsList()},handleSearch:function(){this.handleGoodsFilter()},handleSelectionChange:function(t){0==this.activeTab?this.multipleSelection=t:this.multipleSelectionStop=t},showDelBox:function(){var t=this;0!=this.multipleSelectionStop.length?this.$confirm("确定永久性删除此商品吗?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){t.handledelGoods()}).catch(function(t){}):this.$message.warning("请选择商品进行操作")},handledelGoods:function(){var t=[];this.multipleSelectionStop.forEach(function(e,i){t.push(e.product_id)});var e=t.join(",");this.deleteProducts(e)},handleSort:function(t){var e={},i=t.prop,a="ascending"==t.order?"asc":"descending"==t.order?"desc":"";switch(console.log(t),i){case"category":e.category=a;break;case"price":e.price=a;break;case"exp":e.exp=a;break;case null:e={}}var o=this.listQuery,s=o.limit,n=o.category_id,r=o.search;this.listQuery=l()({},{page:1,limit:s,category_id:n,search:r},e),this.getGoodsList(),console.log(this.listQuery)},resetTemp:function(){this.temp={id:null,tcard_items:[],item:{is_limit:1,name:"",category_id:this.commandFilterList[0].id,price:"",remark:"",imageurl:"",exp:12,exp_unit:1,is_expired_vaild:1}}},handleAdd:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogEditFormVisible=!0,this.$nextTick(function(){t.$refs.scrollbar.wrap.scrollTop=0,t.$refs.dataForm.clearValidate()})},createData:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&(t.resetTimes(),t.resetEditData(),Object(u.f)(t.temp.item).then(function(e){console.log("编辑temp",t.temp),t.getGoodsList(),t.$message.success("新增成功"),t.editStatus.autoAdd?t.handleAdd():t.dialogEditFormVisible=!1}).catch(function(t){console.log(t)}))})},handleEdit:function(t){var e=this;this.resetTemp(),this.temp.id=t.id,console.log("产品id",this.temp.id),Object(u.t)(this.temp.id).then(function(t){var i=t.success.data;console.log("产品信息",i);var a=i.info,o=a.is_limit,s=a.exp,n=a.exp_unit,r=void 0===n?0:n,c=a.is_expired_vaild,d=i.info.item,u=d.category_id,m=d.imageurl,p=d.name,f=d.price,g=d.remark,_=i.tcard_items;_.forEach(function(t,e){_[e]=l()({},t,{is_del:0})}),0==o&&_.map(function(t){return t.time="无限"}),e.temp=l()({},e.temp,{tcard_items:_,item:{is_limit:o,category_id:u,imageurl:m,name:p,price:f,remark:g,exp:s,exp_unit:r,is_expired_vaild:c}}),console.log("编辑temp",e.temp),e.dialogStatus="edit",e.dialogEditFormVisible=!0,e.$nextTick(function(){e.$refs.scrollbar.wrap.scrollTop=0,e.$refs.dataForm.clearValidate()})})},updateData:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&(t.resetTimes(),t.resetEditData(),Object(u.n)(t.temp.id,t.temp.item).then(function(e){t.dialogEditFormVisible=!1,console.log("编辑temp",t.temp),t.getGoodsList(),t.$message.success("编辑成功")}).catch(function(t){console.log(t)}))})},resetEditData:function(){var t=[].concat(o()(this.temp.tcard_items));this.temp.item=l()({},this.temp.item,{tcard_info:t})},resetTimes:function(){0==this.temp.item.is_limit&&this.temp.tcard_items.map(function(t){return t.time=-1})},handleCalcPrice:function(){var t=this.temp.item.price,e=this.temp.tcard_items.filter(function(t){return!t.hasOwnProperty("id")||t.hasOwnProperty("id")&&0==t.is_del}).reduce(function(t,e){return Object(m.a)(t).plus(Object(m.a)(Number(e.price)).multipliedBy(Number(e.time)))},0);this.temp.tcard_items.map(function(i){0==i.is_del&&void 0!=i.time&&0!=i.time&&""!=i.time&&null!=i.time?i.avg_price=Object(m.a)(Number(i.price)).multipliedBy(Number(t)/e).toFixed(2):i.avg_price=0})},handleChangeTcardLimit:function(t){console.log("is_limit:",t),0==t?(this.temp.tcard_items.map(function(t){t.time="无限",t.avg_price=0}),this.temp.item.is_expired_vaild=0):(this.temp.tcard_items.map(function(t){return t.time="1"}),this.temp.item.is_expired_vaild=1)},getGoodsList:function(){var t=this;Object(u.B)(this.listQuery).then(function(e){console.log(e);var i=e.success.data;0==t.commandFilterList.length&&(t.commandFilterList=[].concat(o()(i.cateinfo))),t.goodsList=[].concat(o()(i.item.data)),t.total=i.item.total,t.listLoading=!1})},handleDelete:function(t){var e=this,i=t.product_id;this.$confirm("确定永久性删除此商品吗?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.deleteProducts(i)}).catch(function(t){})},deleteProducts:function(t){var e=this;Object(u.j)(t).then(function(t){e.getStopGoodsList(),e.$message.success("删除成功")}).catch(function(t){console.log(t),e.$message.error("删除失败")})},uploadImage:function(){},beforeUpload:function(t){},uploadSuccess:function(t,e,i){console.log(t.success.data),console.log(e),this.temp.item.imageurl=t.success.data},uploadError:function(t,e,i){console.log(t)},showInnerDialog:function(){this.innerAddItemVisible=!0,this.addListLoading=!0,this.getAddItems(this.activeName)},getAddItems:function(t,e){var i=this;Object(u.b)(t,e).then(function(t){var e=t.success.data;i.addFilterList=[].concat(o()(e.cateInfo)),i.addItemList=[].concat(o()(e.itemInfo.data)),i.addListLoading=!1,console.log(e),console.log(i.addItemList),console.log(i.activeName)})},handleFilterAddItem:function(){this.getAddItems(this.activeName,this.addFilter),console.log(this.addFilter)},handleSelectAddItem:function(t){this.addMultipleSelection=t},handleAddItem:function(){var t=this;this.addMultipleSelection.forEach(function(e,i){var a=0==t.temp.item.is_limit?"无限":"1",o=t.addMultipleSelection[i],s=o.id,n=o.name,r=o.price,c=t.temp.tcard_items.filter(function(t){return t.item_id==s});0==c.length?(t.addMultipleSelection[i]=l()({},{item_id:s,name:n,price:r,time:a,avg_price:0,is_del:0}),t.temp.tcard_items.push(t.addMultipleSelection[i])):c.filter(function(t){return 1==t.is_del}).forEach(function(e,i){var o=t.temp.tcard_items.indexOf(e),s=l()({},t.temp.tcard_items[o],{is_del:0,time:a,avg_price:0});t.temp.tcard_items.splice(o,1,s)})}),console.log(this.temp.tcard_items),this.innerAddItemVisible=!1},deletTcardItems:function(t){var e=this.temp.tcard_items.indexOf(t);"edit"==this.dialogStatus&&t.hasOwnProperty("id")?(t=l()({},t,{is_del:1}),this.temp.tcard_items.splice(e,1,t)):this.temp.tcard_items.splice(e,1)},getStopGoodsList:function(){var t=this;this.stopListLoading=!0,Object(u.w)(this.stopListQuery).then(function(e){var i=e.success.data;t.stopGoodsList=[].concat(o()(i.data)),t.stopTotal=i.total,t.stopListLoading=!1,console.log("停售产品列表",t.stopGoodsList)}).catch(function(t){})},handleStop:function(t){var e=this,i=t.item_id;this.$confirm("确定停售此商品吗?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.stopProducts(i)}).catch(function(t){})},stopProducts:function(t){var e=this;Object(u.z)(t).then(function(t){e.getGoodsList(),e.getStopGoodsList(),e.$message.success("停售成功")}).catch(function(t){console.log(t)})},handleSale:function(t){var e=this,i=t.id;this.$confirm("确定开售此商品吗?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.saleProducts(i)}).catch(function(t){})},saleProducts:function(t){var e=this;Object(u.x)(t).then(function(t){e.getGoodsList(),e.getStopGoodsList(),console.log("开售成功")}).catch(function(t){console.log(t)})},showStopBox:function(){var t=this;0!=this.multipleSelection.length?this.$confirm("确定停售此商品吗?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){var e=t.multipleSelection.map(function(t,e){return t.item_id});e.join(","),t.stopProducts(e)}).catch(function(t){}):this.$message.warning("请选择商品进行操作")},showSaleBox:function(){var t=this;0!=this.multipleSelectionStop.length?this.$confirm("确定开售此商品吗?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){var e=t.multipleSelectionStop.map(function(t,e){return t.id});e.join(","),t.saleProducts(e)}).catch(function(t){}):this.$message.warning("请选择商品进行操作")}},computed:{tcard_items:function(){return this.temp.tcard_items.filter(function(t){return 0==t.is_del})},syncDialogShow:function(){return this.synchrodataDialog.show}},watch:{activeName:function(t,e){this.addFilterList=[],this.addFilter=[],this.addItemList=[],this.getAddItems(t)},syncDialogShow:function(t,e){t||this.getGoodsList()},activeTab:function(t,e){0!=t||this.goodsList.length?1!=t||this.stopGoodsList.length||this.getStopGoodsList():this.getGoodsList()}},mounted:function(){},created:function(){this.getGoodsList()}},f=(i("dEGq"),i("XTKO"),i("ZrdR")),g=Object(f.a)(p,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container product_card"},[i("el-card",{staticClass:"filter-box mb-15",attrs:{shadow:"always"}},[i("action-bar",{attrs:{activeName:t.synchrodataDialog.activeName,category_id:t.listQuery.category_id,commandFilterList:t.commandFilterList,search:t.listQuery.search,activeTab:t.activeTab},on:{"update:category_id":function(e){t.$set(t.listQuery,"category_id",e)},"update:search":function(e){t.$set(t.listQuery,"search",e)},"update:activeTab":function(e){t.activeTab=e},handleCommand:t.handleCommand,handleGoodsFilter:t.handleGoodsFilter,handleSearch:t.handleSearch,showSynchroDialog:function(e){t.synchrodataDialog.show=!0},handleAdd:t.handleAdd}},[i("template",{slot:"0"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"goodsList",staticClass:"goods_list",staticStyle:{width:"100%"},attrs:{data:t.goodsList,fit:"",stripe:""},on:{"selection-change":t.handleSelectionChange,"sort-change":t.handleSort}},[i("el-table-column",{attrs:{align:"left",type:"index",width:"40px"}}),t._v(" "),i("el-table-column",{attrs:{align:"left",type:"selection",width:"30px"}}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"名称",prop:"name",width:"420px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"product_name"},[i("span",{staticClass:"product_img"},[i("img",{directives:[{name:"productImg",rawName:"v-productImg",value:e.row.item.imageurl,expression:"scope.row.item.imageurl"}]})]),t._v("\n                "+t._s(e.row.item.name)+"\n              ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"来源"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.item.source_item_id>0?"总部分配":"单店添加"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"分类",prop:"category",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.item.category?e.row.item.category.name:"-"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"单价",prop:"price",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("formatMoney")(e.row.item.price)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"时效",prop:"exp",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.exp)+t._s(e.row.exp_unit))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"备注",prop:"remark"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(null==e.row.item.remark||""==e.row.item.remark?"-":e.row.item.remark))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"160",align:"left",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleStop(e.row)}}},[t._v("停售")])]}}])})],1),t._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],staticClass:"pagination",attrs:{layout:t.layout,total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){t.$set(t.listQuery,"page",e)},"update:limit":function(e){t.$set(t.listQuery,"limit",e)},pagination:t.getGoodsList}})],1),t._v(" "),i("template",{slot:"1"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.stopListLoading,expression:"stopListLoading"}],ref:"goodsList",staticClass:"goods_list",staticStyle:{width:"100%"},attrs:{data:t.stopGoodsList,fit:"",stripe:""},on:{"selection-change":t.handleSelectionChange,"sort-change":t.handleSort}},[i("el-table-column",{attrs:{align:"left",type:"index",width:"40px"}}),t._v(" "),i("el-table-column",{attrs:{align:"left",type:"selection",width:"30px"}}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"名称",prop:"name",width:"420px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"product_name"},[i("span",{staticClass:"product_img"},[i("img",{directives:[{name:"productImg",rawName:"v-productImg",value:e.row.imageurl,expression:"scope.row.imageurl"}]})]),t._v("\n                "+t._s(e.row.name)+"\n              ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"来源"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.source_item_id>0?"总部分配":"单店添加"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"分类",prop:"category",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.category?e.row.category.name:"-"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"单价",prop:"price",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("formatMoney")(e.row.price)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"时效",prop:"exp",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.exp)+t._s(e.row.exp_unit))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"备注",prop:"remark"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(null==e.row.remark||""==e.row.remark?"-":e.row.remark))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"160",align:"left",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleSale(e.row)}}},[t._v("开售")]),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.stopTotal>0,expression:"stopTotal>0"}],staticClass:"pagination",attrs:{layout:t.layout,total:t.stopTotal,page:t.stopListQuery.page,limit:t.stopListQuery.limit},on:{"update:page":function(e){t.$set(t.stopListQuery,"page",e)},"update:limit":function(e){t.$set(t.stopListQuery,"limit",e)},pagination:t.getStopGoodsList}})],1)],2),t._v(" "),i("el-dialog",{staticClass:"goods_dialog",attrs:{title:t.dialogTitle[t.dialogStatus],visible:t.dialogEditFormVisible,width:"960px"},on:{"update:visible":function(e){t.dialogEditFormVisible=e}}},[i("el-form",{ref:"dataForm",attrs:{"label-position":"right","label-width":"80px",model:t.temp.item,rules:t.rules,"show-message":!0}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{staticClass:"left_content",attrs:{span:13}},[i("upload-image",{attrs:{imageurl:t.temp.item.imageurl},on:{"update:imageurl":function(e){t.$set(t.temp.item,"imageurl",e)}}})],1),t._v(" "),i("el-col",{staticClass:"right_content",attrs:{span:11}},[i("el-scrollbar",{ref:"scrollbar",staticClass:"scrollbar"},[i("div",[i("el-form-item",{attrs:{label:"次卡类型",prop:"is_limit"}},[i("el-radio-group",{on:{change:t.handleChangeTcardLimit},model:{value:t.temp.item.is_limit,callback:function(e){t.$set(t.temp.item,"is_limit",e)},expression:"temp.item.is_limit"}},[i("el-radio-button",{attrs:{label:"1"}},[t._v("有限次卡")]),t._v(" "),i("el-radio-button",{attrs:{label:"0"}},[t._v("无限次卡")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"卡片名称",prop:"name"}},[i("el-input",{model:{value:t.temp.item.name,callback:function(e){t.$set(t.temp.item,"name",e)},expression:"temp.item.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"次卡分类",prop:"category_id"}},[i("el-select",{model:{value:t.temp.item.category_id,callback:function(e){t.$set(t.temp.item,"category_id",e)},expression:"temp.item.category_id"}},t._l(t.commandFilterList,function(t,e,a){return i("el-option",{key:a,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),i("el-form-item",{staticClass:"form_tablelist",attrs:{label:"指定服务",required:""}},[[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tcard_items}},[i("el-table-column",{attrs:{label:"产品名称",width:"125"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"单价",width:"75"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("formatMoney")(e.row.price)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"卡内次数"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{attrs:{disabled:0==t.temp.item.is_limit},model:{value:e.row.time,callback:function(i){t.$set(e.row,"time",i)},expression:"scope.row.time"}},[i("template",{slot:"append"},[t._v("次")])],2)]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"平均单次价格"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{model:{value:e.row.avg_price,callback:function(i){t.$set(e.row,"avg_price",i)},expression:"scope.row.avg_price"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"75",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.deletTcardItems(e.row)}}},[t._v("\n                            删除\n                          ")])]}}])})],1),t._v(" "),i("el-button",{staticClass:"add_button",attrs:{type:"primary"},on:{click:t.showInnerDialog}},[t._v("+  添加匹配产品")])]],2),t._v(" "),i("el-form-item",{attrs:{label:"过期可用"}},[i("el-radio-group",{attrs:{disabled:0==t.temp.item.is_limit},model:{value:t.temp.item.is_expired_vaild,callback:function(e){t.$set(t.temp.item,"is_expired_vaild",e)},expression:"temp.item.is_expired_vaild"}},[i("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),i("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"时效",prop:"exp"}},[i("el-input",{staticClass:"exp fl",model:{value:t.temp.item.exp,callback:function(e){t.$set(t.temp.item,"exp",e)},expression:"temp.item.exp"}}),t._v(" "),i("el-select",{staticClass:"exp_unit fl",model:{value:t.temp.item.exp_unit,callback:function(e){t.$set(t.temp.item,"exp_unit",e)},expression:"temp.item.exp_unit"}},t._l(["天","月"],function(t,e,a){return i("el-option",{key:a,attrs:{label:t,value:e}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"单价",prop:"price"}},[i("div",[i("el-input",{staticClass:"fl",model:{value:t.temp.item.price,callback:function(e){t.$set(t.temp.item,"price",e)},expression:"temp.item.price"}}),t._v(" "),""!=t.temp.item.price&&t.temp.item.price>0&&1==t.temp.item.is_limit?i("el-button",{staticClass:"fl auto_count",attrs:{type:"primary"},on:{click:t.handleCalcPrice}},[t._v("核算单次均价")]):t._e()],1)]),t._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"备注"}},[i("el-input",{attrs:{type:"textarea",rows:3},model:{value:t.temp.item.remark,callback:function(e){t.$set(t.temp.item,"remark",e)},expression:"temp.item.remark"}})],1)],1)])],1)],1)],1),t._v(" "),i("el-dialog",{staticClass:"addProduct_dialog",attrs:{width:"746px",title:"添加搭配商品",visible:t.innerAddItemVisible,"append-to-body":""},on:{"update:visible":function(e){t.innerAddItemVisible=e}}},[i("div",{staticClass:"inner_content clearfix"},[i("el-tabs",{attrs:{"tab-position":"left"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"商品",name:"0"}}),t._v(" "),i("el-tab-pane",{attrs:{label:"服务",name:"1"}})],1),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.addListLoading,expression:"addListLoading"}],staticClass:"fl tab_right_content"},[t.addListLoading?t._e():i("el-scrollbar",{ref:"scrollbar_addItem",staticClass:"scrollbar"},[i("div",{staticClass:"content_header clearfix"},[i("el-select",{staticClass:"fl",attrs:{placeholder:"产品分类"},on:{change:t.handleFilterAddItem},model:{value:t.addFilter.category_id,callback:function(e){t.$set(t.addFilter,"category_id",e)},expression:"addFilter.category_id"}},t._l(t.addFilterList,function(t,e,a){return i("el-option",{key:a,staticClass:"goods_select_option",attrs:{label:t.name,value:t.id}})})),t._v(" "),i("el-input",{staticClass:"fr search",attrs:{placeholder:"产品名称、编号","suffix-icon":"el-icon-search",clearable:""},on:{change:t.handleFilterAddItem},model:{value:t.addFilter.search,callback:function(e){t.$set(t.addFilter,"search",e)},expression:"addFilter.search"}})],1),t._v(" "),i("div",{staticClass:"content_body"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.addItemList},on:{"selection-change":t.handleSelectAddItem}},[i("el-table-column",{attrs:{align:"left",type:"index",width:"40px"}}),t._v(" "),i("el-table-column",{attrs:{align:"left",type:"selection",width:"30px"}}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"编码"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"==t.activeName?i("span",[t._v(t._s(e.row.product.code))]):i("span",[t._v(t._s(e.row.service.code))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"名称",prop:"name","min-width":"240px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"product_name"},[i("span",{staticClass:"product_img"},[i("img",{attrs:{src:e.row.imageurl,alt:""}})]),t._v("\n                        "+t._s(e.row.name)+"\n                      ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"价格",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("formatMoney")(e.row.price)))])]}}])})],1)],1)])],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"vertical-align":"middle"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.innerAddItemVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleAddItem}},[t._v("确 定")])],1)]),t._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"vertical-align":"middle"},attrs:{slot:"footer"},slot:"footer"},["create"==t.dialogStatus?i("div",{staticClass:"fl",staticStyle:{"vertical-align":"middle","margin-top":"10px"}},[i("el-checkbox",{model:{value:t.editStatus.autoAdd,callback:function(e){t.$set(t.editStatus,"autoAdd",e)},expression:"editStatus.autoAdd"}},[t._v("连续增加")])],1):t._e(),t._v(" "),i("el-button",{on:{click:function(e){t.dialogEditFormVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"==t.dialogStatus?t.createData():t.updateData()}}},[t._v("确 定")])],1)],1),t._v(" "),i("synchrodata-dialog",{attrs:{visible:t.synchrodataDialog.show,activeName:t.synchrodataDialog.activeName},on:{"update:visible":function(e){t.$set(t.synchrodataDialog,"show",e)}}})],1)],1)},[],!1,null,"3796603e",null);g.options.__file="card.vue";e.default=g.exports}}]);